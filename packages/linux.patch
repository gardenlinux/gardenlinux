--- org/debian/config/defines	2020-08-10 07:56:45.942642560 +0000
+++ new/debian/config/defines	2020-08-10 09:55:04.355656830 +0000
@@ -1,5 +1,5 @@
 [abi]
-abiname: 1
+abiname: 5
 ignore-changes:
  __cpuhp_*
  bpf_analyzer
--- org/debian/rules.d/scripts/kconfig/Makefile	2020-08-11 14:51:35.530153452 +0000
+++ new/debian/rules.d/scripts/kconfig/Makefile	2020-08-11 14:51:52.622146051 +0000
@@ -2,7 +2,7 @@

 include \\\$(top_rulesdir)/Makefile.inc

-conf: conf.o confdata.o expr.o lexer.lex.o parser.tab.o preprocess.o symbol.o util.o
+conf: conf.o confdata.o expr.o lexer.lex.o parser.tab.o preprocess.o symbol.o

 lexer.lex.o: parser.tab.h

--- a/debian/patches/bugfix/all/firmware-remove-redundant-log-messages-from-drivers.patch	2020-09-28 15:37:19.436854371 +0000
+++ b/debian/patches/bugfix/all/firmware-remove-redundant-log-messages-from-drivers.patch	2020-09-28 15:47:38.884648135 +0000
@@ -9,8 +9,10 @@
 This will probably need to be split up into multiple patches prior to
 upstream submission.
 
---- a/arch/x86/kernel/cpu/microcode/amd.c
-+++ b/arch/x86/kernel/cpu/microcode/amd.c
+Index: linux/arch/x86/kernel/cpu/microcode/amd.c
+===================================================================
+--- linux.orig/arch/x86/kernel/cpu/microcode/amd.c
++++ linux/arch/x86/kernel/cpu/microcode/amd.c
 @@ -901,10 +901,8 @@ static enum ucode_state request_microcod
  	if (c->x86 >= 0x15)
  		snprintf(fw_name, sizeof(fw_name), "amd-ucode/microcode_amd_fam%.2xh.bin", c->x86);
@@ -23,8 +25,10 @@
  
  	ret = UCODE_ERROR;
  	if (!verify_container(fw->data, fw->size, false))
---- a/drivers/atm/ambassador.c
-+++ b/drivers/atm/ambassador.c
+Index: linux/drivers/atm/ambassador.c
+===================================================================
+--- linux.orig/drivers/atm/ambassador.c
++++ linux/drivers/atm/ambassador.c
 @@ -1914,10 +1914,8 @@ static int ucode_init(loader_block *lb,
    int res;
  
@@ -37,9 +41,11 @@
  
    /* First record contains just the start address */
    rec = (const struct ihex_binrec *)fw->data;
---- a/drivers/atm/fore200e.c
-+++ b/drivers/atm/fore200e.c
-@@ -2414,10 +2414,9 @@ static int fore200e_load_and_start_fw(st
+Index: linux/drivers/atm/fore200e.c
+===================================================================
+--- linux.orig/drivers/atm/fore200e.c
++++ linux/drivers/atm/fore200e.c
+@@ -2425,10 +2425,9 @@ static int fore200e_load_and_start_fw(st
      int err;
  
      sprintf(buf, "%s%s", fore200e->bus->proc_name, FW_EXT);
@@ -52,8 +58,10 @@
  
      fw_data = (const __le32 *)firmware->data;
      fw_size = firmware->size / sizeof(u32);
---- a/drivers/bluetooth/ath3k.c
-+++ b/drivers/bluetooth/ath3k.c
+Index: linux/drivers/bluetooth/ath3k.c
+===================================================================
+--- linux.orig/drivers/bluetooth/ath3k.c
++++ linux/drivers/bluetooth/ath3k.c
 @@ -417,10 +417,8 @@ static int ath3k_load_patch(struct usb_d
  		 le32_to_cpu(fw_version.rom_version));
  
@@ -78,8 +86,10 @@
  
  	ret = ath3k_load_fwfile(udev, firmware);
  	release_firmware(firmware);
---- a/drivers/bluetooth/bcm203x.c
-+++ b/drivers/bluetooth/bcm203x.c
+Index: linux/drivers/bluetooth/bcm203x.c
+===================================================================
+--- linux.orig/drivers/bluetooth/bcm203x.c
++++ linux/drivers/bluetooth/bcm203x.c
 @@ -174,7 +174,6 @@ static int bcm203x_probe(struct usb_inte
  		return -ENOMEM;
  
@@ -96,8 +106,10 @@
  		usb_free_urb(data->urb);
  		kfree(data->buffer);
  		return -EIO;
---- a/drivers/bluetooth/bfusb.c
-+++ b/drivers/bluetooth/bfusb.c
+Index: linux/drivers/bluetooth/bfusb.c
+===================================================================
+--- linux.orig/drivers/bluetooth/bfusb.c
++++ linux/drivers/bluetooth/bfusb.c
 @@ -637,10 +637,8 @@ static int bfusb_probe(struct usb_interf
  	skb_queue_head_init(&data->pending_q);
  	skb_queue_head_init(&data->completed_q);
@@ -110,8 +122,10 @@
  
  	BT_DBG("firmware data %p size %zu", firmware->data, firmware->size);
  
---- a/drivers/bluetooth/bt3c_cs.c
-+++ b/drivers/bluetooth/bt3c_cs.c
+Index: linux/drivers/bluetooth/bt3c_cs.c
+===================================================================
+--- linux.orig/drivers/bluetooth/bt3c_cs.c
++++ linux/drivers/bluetooth/bt3c_cs.c
 @@ -569,10 +569,8 @@ static int bt3c_open(struct bt3c_info *i
  
  	/* Load firmware */
@@ -124,8 +138,10 @@
  
  	err = bt3c_load_firmware(info, firmware->data, firmware->size);
  
---- a/drivers/bluetooth/btmrvl_sdio.c
-+++ b/drivers/bluetooth/btmrvl_sdio.c
+Index: linux/drivers/bluetooth/btmrvl_sdio.c
+===================================================================
+--- linux.orig/drivers/bluetooth/btmrvl_sdio.c
++++ linux/drivers/bluetooth/btmrvl_sdio.c
 @@ -526,8 +526,6 @@ static int btmrvl_sdio_download_helper(s
  	ret = request_firmware(&fw_helper, card->helper,
  						&card->func->dev);
@@ -144,8 +160,10 @@
  		ret = -ENOENT;
  		goto done;
  	}
---- a/drivers/char/dsp56k.c
-+++ b/drivers/char/dsp56k.c
+Index: linux/drivers/char/dsp56k.c
+===================================================================
+--- linux.orig/drivers/char/dsp56k.c
++++ linux/drivers/char/dsp56k.c
 @@ -140,11 +140,8 @@ static int dsp56k_upload(u_char __user *
  	}
  	err = request_firmware(&fw, fw_name, &pdev->dev);
@@ -159,9 +177,11 @@
  	if (fw->size % 3) {
  		printk(KERN_ERR "Bogus length %d in image \"%s\"\n",
  		       fw->size, fw_name);
---- a/drivers/dma/imx-sdma.c
-+++ b/drivers/dma/imx-sdma.c
-@@ -1719,11 +1719,8 @@ static void sdma_load_firmware(const str
+Index: linux/drivers/dma/imx-sdma.c
+===================================================================
+--- linux.orig/drivers/dma/imx-sdma.c
++++ linux/drivers/dma/imx-sdma.c
+@@ -1728,11 +1728,8 @@ static void sdma_load_firmware(const str
  	const struct sdma_script_start_addrs *addr;
  	unsigned short *ram_code;
  
@@ -174,9 +194,11 @@
  
  	if (fw->size < sizeof(*header))
  		goto err_firmware;
---- a/drivers/gpu/drm/mga/mga_warp.c
-+++ b/drivers/gpu/drm/mga/mga_warp.c
-@@ -79,11 +79,8 @@ int mga_warp_install_microcode(drm_mga_p
+Index: linux/drivers/gpu/drm/mga/mga_warp.c
+===================================================================
+--- linux.orig/drivers/gpu/drm/mga/mga_warp.c
++++ linux/drivers/gpu/drm/mga/mga_warp.c
+@@ -77,11 +77,8 @@ int mga_warp_install_microcode(drm_mga_p
  	}
  	rc = request_ihex_firmware(&fw, firmware_name, &pdev->dev);
  	platform_device_unregister(pdev);
@@ -189,9 +211,11 @@
  
  	size = 0;
  	where = 0;
---- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
-+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
-@@ -2099,10 +2099,8 @@ gf100_gr_ctor_fw_legacy(struct gf100_gr
+Index: linux/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
+===================================================================
+--- linux.orig/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
++++ linux/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
+@@ -2125,10 +2125,8 @@ gf100_gr_ctor_fw_legacy(struct gf100_gr
  	if (ret) {
  		snprintf(f, sizeof(f), "nouveau/%s", fwname);
  		ret = request_firmware(&fw, f, device->dev);
@@ -203,8 +227,10 @@
  	}
  
  	fuc->size = fw->size;
---- a/drivers/gpu/drm/r128/r128_cce.c
-+++ b/drivers/gpu/drm/r128/r128_cce.c
+Index: linux/drivers/gpu/drm/r128/r128_cce.c
+===================================================================
+--- linux.orig/drivers/gpu/drm/r128/r128_cce.c
++++ linux/drivers/gpu/drm/r128/r128_cce.c
 @@ -162,11 +162,8 @@ static int r128_cce_load_microcode(drm_r
  	}
  	rc = request_firmware(&fw, FIRMWARE_NAME, &pdev->dev);
@@ -218,8 +244,10 @@
  
  	if (fw->size != 256 * 8) {
  		pr_err("r128_cce: Bogus length %zu in firmware \"%s\"\n",
---- a/drivers/gpu/drm/radeon/ni.c
-+++ b/drivers/gpu/drm/radeon/ni.c
+Index: linux/drivers/gpu/drm/radeon/ni.c
+===================================================================
+--- linux.orig/drivers/gpu/drm/radeon/ni.c
++++ linux/drivers/gpu/drm/radeon/ni.c
 @@ -833,9 +833,6 @@ int ni_init_microcode(struct radeon_devi
  
  out:
@@ -230,8 +258,10 @@
  		release_firmware(rdev->pfp_fw);
  		rdev->pfp_fw = NULL;
  		release_firmware(rdev->me_fw);
---- a/drivers/gpu/drm/radeon/r100.c
-+++ b/drivers/gpu/drm/radeon/r100.c
+Index: linux/drivers/gpu/drm/radeon/r100.c
+===================================================================
+--- linux.orig/drivers/gpu/drm/radeon/r100.c
++++ linux/drivers/gpu/drm/radeon/r100.c
 @@ -1047,9 +1047,7 @@ static int r100_cp_init_microcode(struct
  	}
  
@@ -243,8 +273,10 @@
  		pr_err("radeon_cp: Bogus length %zu in firmware \"%s\"\n",
  		       rdev->me_fw->size, fw_name);
  		err = -EINVAL;
---- a/drivers/gpu/drm/radeon/r600.c
-+++ b/drivers/gpu/drm/radeon/r600.c
+Index: linux/drivers/gpu/drm/radeon/r600.c
+===================================================================
+--- linux.orig/drivers/gpu/drm/radeon/r600.c
++++ linux/drivers/gpu/drm/radeon/r600.c
 @@ -2599,9 +2599,6 @@ int r600_init_microcode(struct radeon_de
  
  out:
@@ -255,8 +287,10 @@
  		release_firmware(rdev->pfp_fw);
  		rdev->pfp_fw = NULL;
  		release_firmware(rdev->me_fw);
---- a/drivers/infiniband/hw/qib/qib_sd7220.c
-+++ b/drivers/infiniband/hw/qib/qib_sd7220.c
+Index: linux/drivers/infiniband/hw/qib/qib_sd7220.c
+===================================================================
+--- linux.orig/drivers/infiniband/hw/qib/qib_sd7220.c
++++ linux/drivers/infiniband/hw/qib/qib_sd7220.c
 @@ -406,10 +406,8 @@ int qib_sd7220_init(struct qib_devdata *
  	}
  
@@ -269,8 +303,10 @@
  
  	/* Substitute our deduced value for was_reset */
  	ret = qib_ibsd_ucode_loaded(dd->pport, fw);
---- a/drivers/input/touchscreen/atmel_mxt_ts.c
-+++ b/drivers/input/touchscreen/atmel_mxt_ts.c
+Index: linux/drivers/input/touchscreen/atmel_mxt_ts.c
+===================================================================
+--- linux.orig/drivers/input/touchscreen/atmel_mxt_ts.c
++++ linux/drivers/input/touchscreen/atmel_mxt_ts.c
 @@ -2778,10 +2778,8 @@ static int mxt_load_fw(struct device *de
  	int ret;
  
@@ -283,8 +319,10 @@
  
  	/* Check for incorrect enc file */
  	ret = mxt_check_firmware_format(dev, fw);
---- a/drivers/isdn/hardware/mISDN/speedfax.c
-+++ b/drivers/isdn/hardware/mISDN/speedfax.c
+Index: linux/drivers/isdn/hardware/mISDN/speedfax.c
+===================================================================
+--- linux.orig/drivers/isdn/hardware/mISDN/speedfax.c
++++ linux/drivers/isdn/hardware/mISDN/speedfax.c
 @@ -379,11 +379,8 @@ setup_instance(struct sfax_hw *card)
  	card->isar.owner = THIS_MODULE;
  
@@ -298,8 +336,10 @@
  	if (debug & DEBUG_HW)
  		pr_notice("%s: got firmware %zu bytes\n",
  			  card->name, firmware->size);
---- a/drivers/media/common/siano/smscoreapi.c
-+++ b/drivers/media/common/siano/smscoreapi.c
+Index: linux/drivers/media/common/siano/smscoreapi.c
+===================================================================
+--- linux.orig/drivers/media/common/siano/smscoreapi.c
++++ linux/drivers/media/common/siano/smscoreapi.c
 @@ -1156,10 +1156,8 @@ static int smscore_load_firmware_from_fi
  		return -EINVAL;
  
@@ -312,8 +352,10 @@
  	pr_debug("read fw %s, buffer size=0x%zx\n", fw_filename, fw->size);
  	fw_buf = kmalloc(ALIGN(fw->size + sizeof(struct sms_firmware),
  			 SMS_ALLOC_ALIGNMENT), GFP_KERNEL | coredev->gfp_buf_flags);
---- a/drivers/media/dvb-frontends/af9013.c
-+++ b/drivers/media/dvb-frontends/af9013.c
+Index: linux/drivers/media/dvb-frontends/af9013.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/af9013.c
++++ linux/drivers/media/dvb-frontends/af9013.c
 @@ -1049,14 +1049,8 @@ static int af9013_download_firmware(stru
  
  	/* Request the firmware, will block and timeout */
@@ -330,8 +372,10 @@
  
  	/* Write firmware checksum & size */
  	for (i = 0; i < firmware->size; i++)
---- a/drivers/media/dvb-frontends/bcm3510.c
-+++ b/drivers/media/dvb-frontends/bcm3510.c
+Index: linux/drivers/media/dvb-frontends/bcm3510.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/bcm3510.c
++++ linux/drivers/media/dvb-frontends/bcm3510.c
 @@ -636,10 +636,9 @@ static int bcm3510_download_firmware(str
  	int ret,i;
  
@@ -345,8 +389,10 @@
  	deb_info("got firmware: %zu\n", fw->size);
  
  	b = fw->data;
---- a/drivers/media/dvb-frontends/cx24116.c
-+++ b/drivers/media/dvb-frontends/cx24116.c
+Index: linux/drivers/media/dvb-frontends/cx24116.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/cx24116.c
++++ linux/drivers/media/dvb-frontends/cx24116.c
 @@ -479,13 +479,8 @@ static int cx24116_firmware_ondemand(str
  			__func__, CX24116_DEFAULT_FIRMWARE);
  		ret = request_firmware(&fw, CX24116_DEFAULT_FIRMWARE,
@@ -362,8 +408,10 @@
  
  		/* Make sure we don't recurse back through here
  		 * during loading */
---- a/drivers/media/dvb-frontends/drxd_hard.c
-+++ b/drivers/media/dvb-frontends/drxd_hard.c
+Index: linux/drivers/media/dvb-frontends/drxd_hard.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/drxd_hard.c
++++ linux/drivers/media/dvb-frontends/drxd_hard.c
 @@ -891,10 +891,8 @@ static int load_firmware(struct drxd_sta
  {
  	const struct firmware *fw;
@@ -376,8 +424,10 @@
  
  	state->microcode = kmemdup(fw->data, fw->size, GFP_KERNEL);
  	if (!state->microcode) {
---- a/drivers/media/dvb-frontends/drxk_hard.c
-+++ b/drivers/media/dvb-frontends/drxk_hard.c
+Index: linux/drivers/media/dvb-frontends/drxk_hard.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/drxk_hard.c
++++ linux/drivers/media/dvb-frontends/drxk_hard.c
 @@ -6271,10 +6271,6 @@ static void load_firmware_cb(const struc
  
  	dprintk(1, ": %s\n", fw ? "firmware loaded" : "firmware not loaded");
@@ -389,8 +439,10 @@
  		state->microcode_name = NULL;
  
  		/*
---- a/drivers/media/dvb-frontends/ds3000.c
-+++ b/drivers/media/dvb-frontends/ds3000.c
+Index: linux/drivers/media/dvb-frontends/ds3000.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/ds3000.c
++++ linux/drivers/media/dvb-frontends/ds3000.c
 @@ -348,12 +348,8 @@ static int ds3000_firmware_ondemand(stru
  				DS3000_DEFAULT_FIRMWARE);
  	ret = request_firmware(&fw, DS3000_DEFAULT_FIRMWARE,
@@ -405,8 +457,10 @@
  
  	ret = ds3000_load_firmware(fe, fw);
  	if (ret)
---- a/drivers/media/dvb-frontends/nxt200x.c
-+++ b/drivers/media/dvb-frontends/nxt200x.c
+Index: linux/drivers/media/dvb-frontends/nxt200x.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/nxt200x.c
++++ linux/drivers/media/dvb-frontends/nxt200x.c
 @@ -876,12 +876,8 @@ static int nxt2002_init(struct dvb_front
  		 __func__, NXT2002_DEFAULT_FIRMWARE);
  	ret = request_firmware(&fw, NXT2002_DEFAULT_FIRMWARE,
@@ -435,8 +489,10 @@
  
  	ret = nxt2004_load_firmware(fe, fw);
  	release_firmware(fw);
---- a/drivers/media/dvb-frontends/or51132.c
-+++ b/drivers/media/dvb-frontends/or51132.c
+Index: linux/drivers/media/dvb-frontends/or51132.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/or51132.c
++++ linux/drivers/media/dvb-frontends/or51132.c
 @@ -326,10 +326,8 @@ static int or51132_set_parameters(struct
  		printk("or51132: Waiting for firmware upload(%s)...\n",
  		       fwname);
@@ -449,8 +505,10 @@
  		ret = or51132_load_firmware(fe, fw);
  		release_firmware(fw);
  		if (ret) {
---- a/drivers/media/dvb-frontends/or51211.c
-+++ b/drivers/media/dvb-frontends/or51211.c
+Index: linux/drivers/media/dvb-frontends/or51211.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/or51211.c
++++ linux/drivers/media/dvb-frontends/or51211.c
 @@ -361,11 +361,8 @@ static int or51211_init(struct dvb_front
  			OR51211_DEFAULT_FIRMWARE);
  		ret = config->request_firmware(fe, &fw,
@@ -464,8 +522,10 @@
  
  		ret = or51211_load_firmware(fe, fw);
  		release_firmware(fw);
---- a/drivers/media/dvb-frontends/sp8870.c
-+++ b/drivers/media/dvb-frontends/sp8870.c
+Index: linux/drivers/media/dvb-frontends/sp8870.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/sp8870.c
++++ linux/drivers/media/dvb-frontends/sp8870.c
 @@ -304,10 +304,8 @@ static int sp8870_init (struct dvb_front
  
  	/* request the firmware, this will block until someone uploads it */
@@ -478,8 +538,10 @@
  
  	if (sp8870_firmware_upload(state, fw)) {
  		printk("sp8870: writing firmware to device failed\n");
---- a/drivers/media/dvb-frontends/sp887x.c
-+++ b/drivers/media/dvb-frontends/sp887x.c
+Index: linux/drivers/media/dvb-frontends/sp887x.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/sp887x.c
++++ linux/drivers/media/dvb-frontends/sp887x.c
 @@ -527,10 +527,8 @@ static int sp887x_init(struct dvb_fronte
  		/* request the firmware, this will block until someone uploads it */
  		printk("sp887x: waiting for firmware upload (%s)...\n", SP887X_DEFAULT_FIRMWARE);
@@ -492,8 +554,10 @@
  
  		ret = sp887x_initial_setup(fe, fw);
  		release_firmware(fw);
---- a/drivers/media/dvb-frontends/tda10048.c
-+++ b/drivers/media/dvb-frontends/tda10048.c
+Index: linux/drivers/media/dvb-frontends/tda10048.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/tda10048.c
++++ linux/drivers/media/dvb-frontends/tda10048.c
 @@ -483,8 +483,6 @@ static int tda10048_firmware_upload(stru
  	ret = request_firmware(&fw, TDA10048_DEFAULT_FIRMWARE,
  		state->i2c->dev.parent);
@@ -503,8 +567,10 @@
  		return -EIO;
  	} else {
  		printk(KERN_INFO "%s: firmware read %zu bytes.\n",
---- a/drivers/media/dvb-frontends/tda1004x.c
-+++ b/drivers/media/dvb-frontends/tda1004x.c
+Index: linux/drivers/media/dvb-frontends/tda1004x.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/tda1004x.c
++++ linux/drivers/media/dvb-frontends/tda1004x.c
 @@ -388,10 +388,8 @@ static int tda10045_fwupload(struct dvb_
  	/* request the firmware, this will block until someone uploads it */
  	printk(KERN_INFO "tda1004x: waiting for firmware upload (%s)...\n", TDA10045_DEFAULT_FIRMWARE);
@@ -525,8 +591,10 @@
  				return ret;
  			} else {
  				printk(KERN_INFO "tda1004x: please rename the firmware file to %s\n",
---- a/drivers/media/dvb-frontends/tda10071.c
-+++ b/drivers/media/dvb-frontends/tda10071.c
+Index: linux/drivers/media/dvb-frontends/tda10071.c
+===================================================================
+--- linux.orig/drivers/media/dvb-frontends/tda10071.c
++++ linux/drivers/media/dvb-frontends/tda10071.c
 @@ -837,12 +837,8 @@ static int tda10071_init(struct dvb_fron
  
  		/* request the firmware, this will block and timeout */
@@ -541,8 +609,10 @@
  
  		/* init */
  		for (i = 0; i < ARRAY_SIZE(tab2); i++) {
---- a/drivers/media/i2c/cx25840/cx25840-firmware.c
-+++ b/drivers/media/i2c/cx25840/cx25840-firmware.c
+Index: linux/drivers/media/i2c/cx25840/cx25840-firmware.c
+===================================================================
+--- linux.orig/drivers/media/i2c/cx25840/cx25840-firmware.c
++++ linux/drivers/media/i2c/cx25840/cx25840-firmware.c
 @@ -113,10 +113,8 @@ int cx25840_loadfw(struct i2c_client *cl
  	if (is_cx231xx(state) && max_buf_size > 16)
  		max_buf_size = 16;
@@ -555,8 +625,10 @@
  
  	start_fw_load(client);
  
---- a/drivers/media/pci/bt8xx/bttv-cards.c
-+++ b/drivers/media/pci/bt8xx/bttv-cards.c
+Index: linux/drivers/media/pci/bt8xx/bttv-cards.c
+===================================================================
+--- linux.orig/drivers/media/pci/bt8xx/bttv-cards.c
++++ linux/drivers/media/pci/bt8xx/bttv-cards.c
 @@ -3904,10 +3904,8 @@ static int pvr_boot(struct bttv *btv)
  	int rc;
  
@@ -569,8 +641,10 @@
  	rc = pvr_altera_load(btv, fw_entry->data, fw_entry->size);
  	pr_info("%d: altera firmware upload %s\n",
  		btv->c.nr, (rc < 0) ? "failed" : "ok");
---- a/drivers/media/pci/cx18/cx18-av-firmware.c
-+++ b/drivers/media/pci/cx18/cx18-av-firmware.c
+Index: linux/drivers/media/pci/cx18/cx18-av-firmware.c
+===================================================================
+--- linux.orig/drivers/media/pci/cx18/cx18-av-firmware.c
++++ linux/drivers/media/pci/cx18/cx18-av-firmware.c
 @@ -70,10 +70,8 @@ int cx18_av_loadfw(struct cx18 *cx)
  	int i;
  	int retries1 = 0;
@@ -583,8 +657,10 @@
  
  	/* The firmware load often has byte errors, so allow for several
  	   retries, both at byte level and at the firmware load level. */
---- a/drivers/media/pci/cx18/cx18-dvb.c
-+++ b/drivers/media/pci/cx18/cx18-dvb.c
+Index: linux/drivers/media/pci/cx18/cx18-dvb.c
+===================================================================
+--- linux.orig/drivers/media/pci/cx18/cx18-dvb.c
++++ linux/drivers/media/pci/cx18/cx18-dvb.c
 @@ -127,9 +127,7 @@ static int yuan_mpc718_mt352_reqfw(struc
  	int ret;
  
@@ -596,8 +672,10 @@
  		size_t sz = (*fw)->size;
  		if (sz < 2 || sz > 64 || (sz % 2) != 0) {
  			CX18_ERR("Firmware %s has a bad size: %lu bytes\n",
---- a/drivers/media/pci/cx18/cx18-firmware.c
-+++ b/drivers/media/pci/cx18/cx18-firmware.c
+Index: linux/drivers/media/pci/cx18/cx18-firmware.c
+===================================================================
+--- linux.orig/drivers/media/pci/cx18/cx18-firmware.c
++++ linux/drivers/media/pci/cx18/cx18-firmware.c
 @@ -92,11 +92,8 @@ static int load_cpu_fw_direct(const char
  	u32 __iomem *dst = (u32 __iomem *)mem;
  	const u32 *src;
@@ -620,8 +698,10 @@
  		cx18_setup_page(cx, 0);
  		return -ENOMEM;
  	}
---- a/drivers/media/pci/cx23885/cx23885-417.c
-+++ b/drivers/media/pci/cx23885/cx23885-417.c
+Index: linux/drivers/media/pci/cx23885/cx23885-417.c
+===================================================================
+--- linux.orig/drivers/media/pci/cx23885/cx23885-417.c
++++ linux/drivers/media/pci/cx23885/cx23885-417.c
 @@ -920,12 +920,8 @@ static int cx23885_load_firmware(struct
  	retval = request_firmware(&firmware, CX23885_FIRM_IMAGE_NAME,
  				  &dev->pci->dev);
@@ -636,9 +716,11 @@
  
  	if (firmware->size != CX23885_FIRM_IMAGE_SIZE) {
  		pr_err("ERROR: Firmware size mismatch (have %zu, expected %d)\n",
---- a/drivers/media/pci/cx23885/cx23885-cards.c
-+++ b/drivers/media/pci/cx23885/cx23885-cards.c
-@@ -2415,10 +2415,7 @@ void cx23885_card_setup(struct cx23885_d
+Index: linux/drivers/media/pci/cx23885/cx23885-cards.c
+===================================================================
+--- linux.orig/drivers/media/pci/cx23885/cx23885-cards.c
++++ linux/drivers/media/pci/cx23885/cx23885-cards.c
+@@ -2439,10 +2439,7 @@ void cx23885_card_setup(struct cx23885_d
  			cinfo.rev, filename);
  
  		ret = request_firmware(&fw, filename, &dev->pci->dev);
@@ -650,8 +732,10 @@
  			altera_init(&netup_config, fw);
  
  		release_firmware(fw);
---- a/drivers/media/pci/cx88/cx88-blackbird.c
-+++ b/drivers/media/pci/cx88/cx88-blackbird.c
+Index: linux/drivers/media/pci/cx88/cx88-blackbird.c
+===================================================================
+--- linux.orig/drivers/media/pci/cx88/cx88-blackbird.c
++++ linux/drivers/media/pci/cx88/cx88-blackbird.c
 @@ -462,12 +462,8 @@ static int blackbird_load_firmware(struc
  	retval = request_firmware(&firmware, CX2341X_FIRM_ENC_FILENAME,
  				  &dev->pci->dev);
@@ -666,8 +750,10 @@
  
  	if (firmware->size != BLACKBIRD_FIRM_IMAGE_SIZE) {
  		pr_err("Firmware size mismatch (have %zd, expected %d)\n",
---- a/drivers/media/pci/ivtv/ivtv-firmware.c
-+++ b/drivers/media/pci/ivtv/ivtv-firmware.c
+Index: linux/drivers/media/pci/ivtv/ivtv-firmware.c
+===================================================================
+--- linux.orig/drivers/media/pci/ivtv/ivtv-firmware.c
++++ linux/drivers/media/pci/ivtv/ivtv-firmware.c
 @@ -68,8 +68,6 @@ retry:
  		release_firmware(fw);
  		return size;
@@ -677,9 +763,11 @@
  	return -ENOMEM;
  }
  
---- a/drivers/media/pci/ngene/ngene-core.c
-+++ b/drivers/media/pci/ngene/ngene-core.c
-@@ -1240,19 +1240,14 @@ static int ngene_load_firm(struct ngene
+Index: linux/drivers/media/pci/ngene/ngene-core.c
+===================================================================
+--- linux.orig/drivers/media/pci/ngene/ngene-core.c
++++ linux/drivers/media/pci/ngene/ngene-core.c
+@@ -1236,19 +1236,14 @@ static int ngene_load_firm(struct ngene
  		break;
  	}
  
@@ -700,8 +788,10 @@
  		ngene_fw = (u8 *) fw->data;
  		err = ngene_command_load_firmware(dev, ngene_fw, size);
  	}
---- a/drivers/media/pci/saa7164/saa7164-fw.c
-+++ b/drivers/media/pci/saa7164/saa7164-fw.c
+Index: linux/drivers/media/pci/saa7164/saa7164-fw.c
+===================================================================
+--- linux.orig/drivers/media/pci/saa7164/saa7164-fw.c
++++ linux/drivers/media/pci/saa7164/saa7164-fw.c
 @@ -406,11 +406,8 @@ int saa7164_downloadfirmware(struct saa7
  			__func__, fwname);
  
@@ -715,9 +805,11 @@
  
  		printk(KERN_INFO "%s() firmware read %zu bytes.\n",
  			__func__, fw->size);
---- a/drivers/media/pci/ttpci/av7110.c
-+++ b/drivers/media/pci/ttpci/av7110.c
-@@ -1500,13 +1500,8 @@ static int get_firmware(struct av7110* a
+Index: linux/drivers/media/pci/ttpci/av7110.c
+===================================================================
+--- linux.orig/drivers/media/pci/ttpci/av7110.c
++++ linux/drivers/media/pci/ttpci/av7110.c
+@@ -1501,13 +1501,8 @@ static int get_firmware(struct av7110* a
  	/* request the av7110 firmware, this will block until someone uploads it */
  	ret = request_firmware(&fw, "dvb-ttpci-01.fw", &av7110->dev->pci->dev);
  	if (ret) {
@@ -733,9 +825,11 @@
  		return -EINVAL;
  	}
  
---- a/drivers/media/pci/ttpci/av7110_hw.c
-+++ b/drivers/media/pci/ttpci/av7110_hw.c
-@@ -236,11 +236,8 @@ int av7110_bootarm(struct av7110 *av7110
+Index: linux/drivers/media/pci/ttpci/av7110_hw.c
+===================================================================
+--- linux.orig/drivers/media/pci/ttpci/av7110_hw.c
++++ linux/drivers/media/pci/ttpci/av7110_hw.c
+@@ -235,11 +235,8 @@ int av7110_bootarm(struct av7110 *av7110
  	//saa7146_setgpio(dev, 3, SAA7146_GPIO_INPUT);
  
  	ret = request_firmware(&fw, fw_name, &dev->pci->dev);
@@ -748,8 +842,10 @@
  
  	mwdebi(av7110, DEBISWAB, DPRAM_BASE, fw->data, fw->size);
  	release_firmware(fw);
---- a/drivers/media/platform/s5p-mfc/s5p_mfc_ctrl.c
-+++ b/drivers/media/platform/s5p-mfc/s5p_mfc_ctrl.c
+Index: linux/drivers/media/platform/s5p-mfc/s5p_mfc_ctrl.c
+===================================================================
+--- linux.orig/drivers/media/platform/s5p-mfc/s5p_mfc_ctrl.c
++++ linux/drivers/media/platform/s5p-mfc/s5p_mfc_ctrl.c
 @@ -65,10 +65,8 @@ int s5p_mfc_load_firmware(struct s5p_mfc
  		}
  	}
@@ -762,8 +858,10 @@
  	if (fw_blob->size > dev->fw_buf.size) {
  		mfc_err("MFC firmware is too big to be loaded\n");
  		release_firmware(fw_blob);
---- a/drivers/media/radio/radio-wl1273.c
-+++ b/drivers/media/radio/radio-wl1273.c
+Index: linux/drivers/media/radio/radio-wl1273.c
+===================================================================
+--- linux.orig/drivers/media/radio/radio-wl1273.c
++++ linux/drivers/media/radio/radio-wl1273.c
 @@ -502,11 +502,8 @@ static int wl1273_fm_upload_firmware_pat
  	 * Uploading the firmware patch is not always necessary,
  	 * so we only print an info message.
@@ -777,8 +875,10 @@
  
  	ptr = (__u8 *) fw_p->data;
  	packet_num = ptr[0];
---- a/drivers/media/radio/wl128x/fmdrv_common.c
-+++ b/drivers/media/radio/wl128x/fmdrv_common.c
+Index: linux/drivers/media/radio/wl128x/fmdrv_common.c
+===================================================================
+--- linux.orig/drivers/media/radio/wl128x/fmdrv_common.c
++++ linux/drivers/media/radio/wl128x/fmdrv_common.c
 @@ -1236,10 +1236,8 @@ static int fm_download_firmware(struct f
  
  	ret = request_firmware(&fw_entry, fw_name,
@@ -791,9 +891,11 @@
  	fmdbg("Firmware(%s) length : %zu bytes\n", fw_name, fw_entry->size);
  
  	fw_data = (void *)fw_entry->data;
---- a/drivers/media/tuners/tuner-xc2028.c
-+++ b/drivers/media/tuners/tuner-xc2028.c
-@@ -1367,7 +1367,6 @@ static void load_firmware_cb(const struc
+Index: linux/drivers/media/tuners/tuner-xc2028.c
+===================================================================
+--- linux.orig/drivers/media/tuners/tuner-xc2028.c
++++ linux/drivers/media/tuners/tuner-xc2028.c
+@@ -1366,7 +1366,6 @@ static void load_firmware_cb(const struc
  
  	tuner_dbg("request_firmware_nowait(): %s\n", fw ? "OK" : "error");
  	if (!fw) {
@@ -801,8 +903,10 @@
  		priv->state = XC2028_NODEV;
  		return;
  	}
---- a/drivers/media/usb/cpia2/cpia2_core.c
-+++ b/drivers/media/usb/cpia2/cpia2_core.c
+Index: linux/drivers/media/usb/cpia2/cpia2_core.c
+===================================================================
+--- linux.orig/drivers/media/usb/cpia2/cpia2_core.c
++++ linux/drivers/media/usb/cpia2/cpia2_core.c
 @@ -912,11 +912,8 @@ static int apply_vp_patch(struct camera_
  	struct cpia2_command cmd;
  
@@ -816,8 +920,10 @@
  
  	cmd.req_mode = CAMERAACCESS_TYPE_REPEAT | CAMERAACCESS_VP;
  	cmd.direction = TRANSFER_WRITE;
---- a/drivers/media/usb/cx231xx/cx231xx-417.c
-+++ b/drivers/media/usb/cx231xx/cx231xx-417.c
+Index: linux/drivers/media/usb/cx231xx/cx231xx-417.c
+===================================================================
+--- linux.orig/drivers/media/usb/cx231xx/cx231xx-417.c
++++ linux/drivers/media/usb/cx231xx/cx231xx-417.c
 @@ -987,11 +987,6 @@ static int cx231xx_load_firmware(struct
  				  dev->dev);
  
@@ -830,8 +936,10 @@
  		vfree(p_current_fw);
  		vfree(p_buffer);
  		return retval;
---- a/drivers/media/usb/dvb-usb/dib0700_devices.c
-+++ b/drivers/media/usb/dvb-usb/dib0700_devices.c
+Index: linux/drivers/media/usb/dvb-usb/dib0700_devices.c
+===================================================================
+--- linux.orig/drivers/media/usb/dvb-usb/dib0700_devices.c
++++ linux/drivers/media/usb/dvb-usb/dib0700_devices.c
 @@ -2413,12 +2413,9 @@ static int stk9090m_frontend_attach(stru
  
  	dib9000_i2c_enumeration(&adap->dev->i2c_adap, 1, 0x10, 0x80);
@@ -847,7 +955,7 @@
  	stk9090m_config.microcode_B_fe_size = state->frontend_firmware->size;
  	stk9090m_config.microcode_B_fe_buffer = state->frontend_firmware->data;
  
-@@ -2479,12 +2476,9 @@ static int nim9090md_frontend_attach(str
+@@ -2483,12 +2480,9 @@ static int nim9090md_frontend_attach(str
  	msleep(20);
  	dib0700_set_gpio(adap->dev, GPIO0, GPIO_OUT, 1);
  
@@ -862,8 +970,10 @@
  	nim9090md_config[0].microcode_B_fe_size = state->frontend_firmware->size;
  	nim9090md_config[0].microcode_B_fe_buffer = state->frontend_firmware->data;
  	nim9090md_config[1].microcode_B_fe_size = state->frontend_firmware->size;
---- a/drivers/media/usb/dvb-usb/dvb-usb-firmware.c
-+++ b/drivers/media/usb/dvb-usb/dvb-usb-firmware.c
+Index: linux/drivers/media/usb/dvb-usb/dvb-usb-firmware.c
+===================================================================
+--- linux.orig/drivers/media/usb/dvb-usb/dvb-usb-firmware.c
++++ linux/drivers/media/usb/dvb-usb/dvb-usb-firmware.c
 @@ -89,13 +89,9 @@ int dvb_usb_download_firmware(struct usb
  	int ret;
  	const struct firmware *fw = NULL;
@@ -880,8 +990,10 @@
  
  	switch (props->usb_ctrl) {
  		case CYPRESS_AN2135:
---- a/drivers/media/usb/dvb-usb/gp8psk.c
-+++ b/drivers/media/usb/dvb-usb/gp8psk.c
+Index: linux/drivers/media/usb/dvb-usb/gp8psk.c
+===================================================================
+--- linux.orig/drivers/media/usb/dvb-usb/gp8psk.c
++++ linux/drivers/media/usb/dvb-usb/gp8psk.c
 @@ -131,19 +131,14 @@ static int gp8psk_load_bcm4500fw(struct
  	const u8 *ptr;
  	u8 *buf;
@@ -903,8 +1015,10 @@
  	ptr = fw->data;
  	buf = kmalloc(64, GFP_KERNEL);
  	if (!buf) {
---- a/drivers/media/usb/dvb-usb/opera1.c
-+++ b/drivers/media/usb/dvb-usb/opera1.c
+Index: linux/drivers/media/usb/dvb-usb/opera1.c
+===================================================================
+--- linux.orig/drivers/media/usb/dvb-usb/opera1.c
++++ linux/drivers/media/usb/dvb-usb/opera1.c
 @@ -450,8 +450,6 @@ static int opera1_xilinx_load_firmware(s
  	info("start downloading fpga firmware %s",filename);
  
@@ -914,8 +1028,10 @@
  		return ret;
  	} else {
  		p = kmalloc(fw->size, GFP_KERNEL);
---- a/drivers/media/usb/go7007/go7007-driver.c
-+++ b/drivers/media/usb/go7007/go7007-driver.c
+Index: linux/drivers/media/usb/go7007/go7007-driver.c
+===================================================================
+--- linux.orig/drivers/media/usb/go7007/go7007-driver.c
++++ linux/drivers/media/usb/go7007/go7007-driver.c
 @@ -84,10 +84,8 @@ static int go7007_load_encoder(struct go
  	u16 intr_val, intr_data;
  
@@ -928,8 +1044,10 @@
  		if (fw_entry->size < 16 || memcmp(fw_entry->data, "WISGO7007FW", 11)) {
  			v4l2_err(go, "file \"%s\" does not appear to be go7007 firmware\n", fw_name);
  			release_firmware(fw_entry);
---- a/drivers/media/usb/go7007/go7007-fw.c
-+++ b/drivers/media/usb/go7007/go7007-fw.c
+Index: linux/drivers/media/usb/go7007/go7007-fw.c
+===================================================================
+--- linux.orig/drivers/media/usb/go7007/go7007-fw.c
++++ linux/drivers/media/usb/go7007/go7007-fw.c
 @@ -1565,12 +1565,8 @@ int go7007_construct_fw_image(struct go7
  	default:
  		return -1;
@@ -944,8 +1062,10 @@
  	code = kcalloc(codespace, 2, GFP_KERNEL);
  	if (code == NULL)
  		goto fw_failed;
---- a/drivers/media/usb/go7007/go7007-loader.c
-+++ b/drivers/media/usb/go7007/go7007-loader.c
+Index: linux/drivers/media/usb/go7007/go7007-loader.c
+===================================================================
+--- linux.orig/drivers/media/usb/go7007/go7007-loader.c
++++ linux/drivers/media/usb/go7007/go7007-loader.c
 @@ -67,11 +67,8 @@ static int go7007_loader_probe(struct us
  
  	dev_info(&interface->dev, "loading firmware %s\n", fw1);
@@ -972,8 +1092,10 @@
  	ret = cypress_load_firmware(usbdev, fw, CYPRESS_FX2);
  	release_firmware(fw);
  	if (0 != ret) {
---- a/drivers/media/usb/gspca/vicam.c
-+++ b/drivers/media/usb/gspca/vicam.c
+Index: linux/drivers/media/usb/gspca/vicam.c
+===================================================================
+--- linux.orig/drivers/media/usb/gspca/vicam.c
++++ linux/drivers/media/usb/gspca/vicam.c
 @@ -230,10 +230,8 @@ static int sd_init(struct gspca_dev *gsp
  
  	ret = request_ihex_firmware(&fw, VICAM_FIRMWARE,
@@ -986,8 +1108,10 @@
  
  	firmware_buf = kmalloc(PAGE_SIZE, GFP_KERNEL);
  	if (!firmware_buf) {
---- a/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
-+++ b/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
+Index: linux/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
+===================================================================
+--- linux.orig/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
++++ linux/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
 @@ -1371,25 +1371,6 @@ static int pvr2_locate_firmware(struct p
  			   "request_firmware fatal error with code=%d",ret);
  		return ret;
@@ -1014,9 +1138,11 @@
  	return ret;
  }
  
---- a/drivers/media/usb/s2255/s2255drv.c
-+++ b/drivers/media/usb/s2255/s2255drv.c
-@@ -2288,10 +2288,8 @@ static int s2255_probe(struct usb_interf
+Index: linux/drivers/media/usb/s2255/s2255drv.c
+===================================================================
+--- linux.orig/drivers/media/usb/s2255/s2255drv.c
++++ linux/drivers/media/usb/s2255/s2255drv.c
+@@ -2278,10 +2278,8 @@ static int s2255_probe(struct usb_interf
  	}
  	/* load the first chunk */
  	if (request_firmware(&dev->fw_data->fw,
@@ -1028,8 +1154,10 @@
  	/* check the firmware is valid */
  	fw_size = dev->fw_data->fw->size;
  	pdata = (__le32 *) &dev->fw_data->fw->data[fw_size - 8];
---- a/drivers/media/usb/ttusb-budget/dvb-ttusb-budget.c
-+++ b/drivers/media/usb/ttusb-budget/dvb-ttusb-budget.c
+Index: linux/drivers/media/usb/ttusb-budget/dvb-ttusb-budget.c
+===================================================================
+--- linux.orig/drivers/media/usb/ttusb-budget/dvb-ttusb-budget.c
++++ linux/drivers/media/usb/ttusb-budget/dvb-ttusb-budget.c
 @@ -291,10 +291,8 @@ static int ttusb_boot_dsp(struct ttusb *
  
  	err = request_firmware(&fw, "ttusb-budget/dspbootcode.bin",
@@ -1042,8 +1170,10 @@
  
  	/* BootBlock */
  	b[0] = 0xaa;
---- a/drivers/media/usb/ttusb-dec/ttusb_dec.c
-+++ b/drivers/media/usb/ttusb-dec/ttusb_dec.c
+Index: linux/drivers/media/usb/ttusb-dec/ttusb_dec.c
+===================================================================
+--- linux.orig/drivers/media/usb/ttusb-dec/ttusb_dec.c
++++ linux/drivers/media/usb/ttusb-dec/ttusb_dec.c
 @@ -1324,11 +1324,8 @@ static int ttusb_dec_boot_dsp(struct ttu
  	dprintk("%s\n", __func__);
  
@@ -1057,8 +1187,10 @@
  
  	firmware = fw_entry->data;
  	firmware_size = fw_entry->size;
---- a/drivers/misc/ti-st/st_kim.c
-+++ b/drivers/misc/ti-st/st_kim.c
+Index: linux/drivers/misc/ti-st/st_kim.c
+===================================================================
+--- linux.orig/drivers/misc/ti-st/st_kim.c
++++ linux/drivers/misc/ti-st/st_kim.c
 @@ -288,11 +288,8 @@ static long download_firmware(struct kim
  	    request_firmware(&kim_gdata->fw_entry, bts_scr_name,
  			     &kim_gdata->kim_pdev->dev);
@@ -1072,8 +1204,10 @@
  	ptr = (void *)kim_gdata->fw_entry->data;
  	len = kim_gdata->fw_entry->size;
  	/* bts_header to remove out magic number and
---- a/drivers/net/can/softing/softing_fw.c
-+++ b/drivers/net/can/softing/softing_fw.c
+Index: linux/drivers/net/can/softing/softing_fw.c
+===================================================================
+--- linux.orig/drivers/net/can/softing/softing_fw.c
++++ linux/drivers/net/can/softing/softing_fw.c
 @@ -226,11 +226,8 @@ int softing_load_app_fw(const char *file
  	int8_t type_end = 0, type_entrypoint = 0;
  
@@ -1087,8 +1221,10 @@
  	dev_dbg(&card->pdev->dev, "firmware(%s) got %lu bytes\n",
  		file, (unsigned long)fw->size);
  	/* parse the firmware */
---- a/drivers/net/ethernet/3com/typhoon.c
-+++ b/drivers/net/ethernet/3com/typhoon.c
+Index: linux/drivers/net/ethernet/3com/typhoon.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/3com/typhoon.c
++++ linux/drivers/net/ethernet/3com/typhoon.c
 @@ -1283,11 +1283,8 @@ typhoon_request_firmware(struct typhoon
  		return 0;
  
@@ -1102,8 +1238,10 @@
  
  	image_data = typhoon_fw->data;
  	remaining = typhoon_fw->size;
---- a/drivers/net/ethernet/adaptec/starfire.c
-+++ b/drivers/net/ethernet/adaptec/starfire.c
+Index: linux/drivers/net/ethernet/adaptec/starfire.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/adaptec/starfire.c
++++ linux/drivers/net/ethernet/adaptec/starfire.c
 @@ -1015,11 +1015,8 @@ static int netdev_open(struct net_device
  #endif /* VLAN_SUPPORT */
  
@@ -1130,8 +1268,10 @@
  	if (fw_tx->size % 4) {
  		printk(KERN_ERR "starfire: bogus length %zu in \"%s\"\n",
  		       fw_tx->size, FIRMWARE_TX);
---- a/drivers/net/ethernet/alacritech/slicoss.c
-+++ b/drivers/net/ethernet/alacritech/slicoss.c
+Index: linux/drivers/net/ethernet/alacritech/slicoss.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/alacritech/slicoss.c
++++ linux/drivers/net/ethernet/alacritech/slicoss.c
 @@ -1052,11 +1052,8 @@ static int slic_load_rcvseq_firmware(str
  	file = (sdev->model == SLIC_MODEL_OASIS) ?  SLIC_RCV_FIRMWARE_OASIS :
  						    SLIC_RCV_FIRMWARE_MOJAVE;
@@ -1157,8 +1297,10 @@
  	/* Do an initial sanity check concerning firmware size now. A further
  	 * check follows below.
  	 */
---- a/drivers/net/ethernet/alteon/acenic.c
-+++ b/drivers/net/ethernet/alteon/acenic.c
+Index: linux/drivers/net/ethernet/alteon/acenic.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/alteon/acenic.c
++++ linux/drivers/net/ethernet/alteon/acenic.c
 @@ -2886,11 +2886,8 @@ static int ace_load_firmware(struct net_
  		fw_name = "acenic/tg1.bin";
  
@@ -1172,8 +1314,10 @@
  
  	fw_data = (void *)fw->data;
  
---- a/drivers/net/ethernet/broadcom/bnx2.c
-+++ b/drivers/net/ethernet/broadcom/bnx2.c
+Index: linux/drivers/net/ethernet/broadcom/bnx2.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/broadcom/bnx2.c
++++ linux/drivers/net/ethernet/broadcom/bnx2.c
 @@ -3718,16 +3718,13 @@ static int bnx2_request_uncached_firmwar
  	}
  
@@ -1194,9 +1338,11 @@
  	mips_fw = (const struct bnx2_mips_fw_file *) bp->mips_firmware->data;
  	rv2p_fw = (const struct bnx2_rv2p_fw_file *) bp->rv2p_firmware->data;
  	if (bp->mips_firmware->size < sizeof(*mips_fw) ||
---- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
-+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
-@@ -13537,11 +13537,8 @@ static int bnx2x_init_firmware(struct bn
+Index: linux/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
++++ linux/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
+@@ -13552,11 +13552,8 @@ static int bnx2x_init_firmware(struct bn
  	BNX2X_DEV_INFO("Loading %s\n", fw_file_name);
  
  	rc = request_firmware(&bp->firmware, fw_file_name, &bp->pdev->dev);
@@ -1209,9 +1355,11 @@
  
  	rc = bnx2x_check_firmware(bp);
  	if (rc) {
---- a/drivers/net/ethernet/broadcom/tg3.c
-+++ b/drivers/net/ethernet/broadcom/tg3.c
-@@ -11410,11 +11410,8 @@ static int tg3_request_firmware(struct t
+Index: linux/drivers/net/ethernet/broadcom/tg3.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/broadcom/tg3.c
++++ linux/drivers/net/ethernet/broadcom/tg3.c
+@@ -11423,11 +11423,8 @@ static int tg3_request_firmware(struct t
  {
  	const struct tg3_firmware_hdr *fw_hdr;
  
@@ -1224,8 +1372,10 @@
  
  	fw_hdr = (struct tg3_firmware_hdr *)tp->fw->data;
  
---- a/drivers/net/ethernet/brocade/bna/cna_fwimg.c
-+++ b/drivers/net/ethernet/brocade/bna/cna_fwimg.c
+Index: linux/drivers/net/ethernet/brocade/bna/cna_fwimg.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/brocade/bna/cna_fwimg.c
++++ linux/drivers/net/ethernet/brocade/bna/cna_fwimg.c
 @@ -24,10 +24,8 @@ cna_read_firmware(struct pci_dev *pdev,
  	const struct firmware *fw;
  	u32 n;
@@ -1238,8 +1388,10 @@
  
  	*bfi_image = (u32 *)fw->data;
  	*bfi_image_size = fw->size/sizeof(u32);
---- a/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
-+++ b/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
+Index: linux/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
++++ linux/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
 @@ -1037,12 +1037,8 @@ int t3_get_edc_fw(struct cphy *phy, int
  	fw_name = get_edc_fw_name(edc_idx);
  	if (fw_name)
@@ -1280,8 +1432,10 @@
  
  	ret = t3_check_tpsram(adap, tpsram->data, tpsram->size);
  	if (ret)
---- a/drivers/net/ethernet/intel/e100.c
-+++ b/drivers/net/ethernet/intel/e100.c
+Index: linux/drivers/net/ethernet/intel/e100.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/intel/e100.c
++++ linux/drivers/net/ethernet/intel/e100.c
 @@ -1265,9 +1265,6 @@ static const struct firmware *e100_reque
  
  	if (err) {
@@ -1292,8 +1446,10 @@
  			return ERR_PTR(err);
  		} else {
  			netif_info(nic, probe, nic->netdev,
---- a/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
-+++ b/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
+Index: linux/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
++++ linux/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
 @@ -580,8 +580,6 @@ static int myri10ge_load_hotplug_firmwar
  	unsigned i;
  
@@ -1303,8 +1459,10 @@
  		status = -EINVAL;
  		goto abort_with_nothing;
  	}
---- a/drivers/net/ethernet/smsc/smc91c92_cs.c
-+++ b/drivers/net/ethernet/smsc/smc91c92_cs.c
+Index: linux/drivers/net/ethernet/smsc/smc91c92_cs.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/smsc/smc91c92_cs.c
++++ linux/drivers/net/ethernet/smsc/smc91c92_cs.c
 @@ -647,10 +647,8 @@ static int osi_load_firmware(struct pcmc
  	int i, err;
  
@@ -1317,8 +1475,10 @@
  
  	/* Download the Seven of Diamonds firmware */
  	for (i = 0; i < fw->size; i++) {
---- a/drivers/net/ethernet/sun/cassini.c
-+++ b/drivers/net/ethernet/sun/cassini.c
+Index: linux/drivers/net/ethernet/sun/cassini.c
+===================================================================
+--- linux.orig/drivers/net/ethernet/sun/cassini.c
++++ linux/drivers/net/ethernet/sun/cassini.c
 @@ -805,11 +805,8 @@ static void cas_saturn_firmware_init(str
  		return;
  
@@ -1332,8 +1492,10 @@
  	if (fw->size < 2) {
  		pr_err("bogus length %zu in \"%s\"\n",
  		       fw->size, fw_name);
---- a/drivers/net/hamradio/yam.c
-+++ b/drivers/net/hamradio/yam.c
+Index: linux/drivers/net/hamradio/yam.c
+===================================================================
+--- linux.orig/drivers/net/hamradio/yam.c
++++ linux/drivers/net/hamradio/yam.c
 @@ -357,11 +357,8 @@ static unsigned char *add_mcs(unsigned c
  		}
  		err = request_firmware(&fw, fw_name[predef], &pdev->dev);
@@ -1347,8 +1509,10 @@
  		if (fw->size != YAM_FPGA_SIZE) {
  			printk(KERN_ERR "Bogus length %zu in firmware \"%s\"\n",
  			       fw->size, fw_name[predef]);
---- a/drivers/net/usb/kaweth.c
-+++ b/drivers/net/usb/kaweth.c
+Index: linux/drivers/net/usb/kaweth.c
+===================================================================
+--- linux.orig/drivers/net/usb/kaweth.c
++++ linux/drivers/net/usb/kaweth.c
 @@ -378,10 +378,8 @@ static int kaweth_download_firmware(stru
  	int ret;
  
@@ -1361,9 +1525,11 @@
  
  	if (fw->size > KAWETH_FIRMWARE_BUF_SIZE) {
  		dev_err(&kaweth->intf->dev, "Firmware too big: %zu\n",
---- a/drivers/net/wimax/i2400m/fw.c
-+++ b/drivers/net/wimax/i2400m/fw.c
-@@ -1581,11 +1581,8 @@ int i2400m_dev_bootstrap(struct i2400m *
+Index: linux/drivers/net/wimax/i2400m/fw.c
+===================================================================
+--- linux.orig/drivers/net/wimax/i2400m/fw.c
++++ linux/drivers/net/wimax/i2400m/fw.c
+@@ -1578,11 +1578,8 @@ int i2400m_dev_bootstrap(struct i2400m *
  		}
  		d_printf(1, dev, "trying firmware %s (%d)\n", fw_name, itr);
  		ret = request_firmware(&fw, fw_name, dev);
@@ -1376,7 +1542,7 @@
  		i2400m->fw_name = fw_name;
  		ret = i2400m_fw_bootstrap(i2400m, fw, flags);
  		release_firmware(fw);
-@@ -1628,8 +1625,6 @@ void i2400m_fw_cache(struct i2400m *i240
+@@ -1625,8 +1622,6 @@ void i2400m_fw_cache(struct i2400m *i240
  	kref_init(&i2400m_fw->kref);
  	result = request_firmware(&i2400m_fw->fw, i2400m->fw_name, dev);
  	if (result < 0) {
@@ -1385,9 +1551,11 @@
  		kfree(i2400m_fw);
  		i2400m_fw = (void *) ~0;
  	} else
---- a/drivers/net/wireless/ath/ath9k/hif_usb.c
-+++ b/drivers/net/wireless/ath/ath9k/hif_usb.c
-@@ -1164,9 +1164,6 @@ static void ath9k_hif_usb_firmware_cb(co
+Index: linux/drivers/net/wireless/ath/ath9k/hif_usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/ath/ath9k/hif_usb.c
++++ linux/drivers/net/wireless/ath/ath9k/hif_usb.c
+@@ -1197,9 +1197,6 @@ static void ath9k_hif_usb_firmware_cb(co
  		if (!ret)
  			return;
  
@@ -1397,8 +1565,10 @@
  		goto err_fw;
  	}
  
---- a/drivers/net/wireless/ath/carl9170/usb.c
-+++ b/drivers/net/wireless/ath/carl9170/usb.c
+Index: linux/drivers/net/wireless/ath/carl9170/usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/ath/carl9170/usb.c
++++ linux/drivers/net/wireless/ath/carl9170/usb.c
 @@ -1029,7 +1029,6 @@ static void carl9170_usb_firmware_step2(
  		return;
  	}
@@ -1407,8 +1577,10 @@
  	carl9170_usb_firmware_failed(ar);
  }
  
---- a/drivers/net/wireless/atmel/at76c50x-usb.c
-+++ b/drivers/net/wireless/atmel/at76c50x-usb.c
+Index: linux/drivers/net/wireless/atmel/at76c50x-usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/atmel/at76c50x-usb.c
++++ linux/drivers/net/wireless/atmel/at76c50x-usb.c
 @@ -1617,13 +1617,8 @@ static struct fwentry *at76_load_firmwar
  
  	at76_dbg(DBG_FW, "downloading firmware %s", fwe->fwname);
@@ -1424,8 +1596,10 @@
  
  	at76_dbg(DBG_FW, "got it.");
  	fwh = (struct at76_fw_header *)(fwe->fw->data);
---- a/drivers/net/wireless/atmel/atmel.c
-+++ b/drivers/net/wireless/atmel/atmel.c
+Index: linux/drivers/net/wireless/atmel/atmel.c
+===================================================================
+--- linux.orig/drivers/net/wireless/atmel/atmel.c
++++ linux/drivers/net/wireless/atmel/atmel.c
 @@ -3893,12 +3893,8 @@ static int reset_atmel_card(struct net_d
  					strcpy(priv->firmware_id, "atmel_at76c502.bin");
  				}
@@ -1440,8 +1614,10 @@
  			} else {
  				int fw_index = 0;
  				int success = 0;
---- a/drivers/net/wireless/broadcom/b43/main.c
-+++ b/drivers/net/wireless/broadcom/b43/main.c
+Index: linux/drivers/net/wireless/broadcom/b43/main.c
+===================================================================
+--- linux.orig/drivers/net/wireless/broadcom/b43/main.c
++++ linux/drivers/net/wireless/broadcom/b43/main.c
 @@ -2243,19 +2243,8 @@ int b43_do_request_fw(struct b43_request
  	}
  	err = request_firmware(&ctx->blob, ctx->fwname,
@@ -1463,9 +1639,11 @@
  fw_ready:
  	if (ctx->blob->size < sizeof(struct b43_fw_header))
  		goto err_format;
---- a/drivers/net/wireless/broadcom/b43legacy/main.c
-+++ b/drivers/net/wireless/broadcom/b43legacy/main.c
-@@ -1522,11 +1522,8 @@ static int do_request_fw(struct b43legac
+Index: linux/drivers/net/wireless/broadcom/b43legacy/main.c
+===================================================================
+--- linux.orig/drivers/net/wireless/broadcom/b43legacy/main.c
++++ linux/drivers/net/wireless/broadcom/b43legacy/main.c
+@@ -1523,11 +1523,8 @@ static int do_request_fw(struct b43legac
  	} else {
  		err = request_firmware(fw, path, dev->dev->dev);
  	}
@@ -1478,8 +1656,10 @@
  	if ((*fw)->size < sizeof(struct b43legacy_fw_header))
  		goto err_format;
  	hdr = (struct b43legacy_fw_header *)((*fw)->data);
---- a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
-+++ b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
+Index: linux/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
+===================================================================
+--- linux.orig/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
++++ linux/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
 @@ -378,19 +378,13 @@ static int brcms_request_fw(struct brcms
  		sprintf(fw_name, "%s-%d.fw", brcms_firmwares[i],
  			UCODE_LOADER_API_VER);
@@ -1502,9 +1682,11 @@
  		wl->fw.hdr_num_entries[i] =
  		    wl->fw.fw_hdr[i]->size / (sizeof(struct firmware_hdr));
  	}
---- a/drivers/net/wireless/intel/ipw2x00/ipw2100.c
-+++ b/drivers/net/wireless/intel/ipw2x00/ipw2100.c
-@@ -8392,12 +8392,8 @@ static int ipw2100_get_firmware(struct i
+Index: linux/drivers/net/wireless/intel/ipw2x00/ipw2100.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intel/ipw2x00/ipw2100.c
++++ linux/drivers/net/wireless/intel/ipw2x00/ipw2100.c
+@@ -8393,12 +8393,8 @@ static int ipw2100_get_firmware(struct i
  
  	rc = request_firmware(&fw->fw_entry, fw_name, &priv->pci_dev->dev);
  
@@ -1518,9 +1700,11 @@
  	IPW_DEBUG_INFO("firmware data %p size %zd\n", fw->fw_entry->data,
  		       fw->fw_entry->size);
  
---- a/drivers/net/wireless/intel/ipw2x00/ipw2200.c
-+++ b/drivers/net/wireless/intel/ipw2x00/ipw2200.c
-@@ -3396,10 +3396,8 @@ static int ipw_get_fw(struct ipw_priv *p
+Index: linux/drivers/net/wireless/intel/ipw2x00/ipw2200.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intel/ipw2x00/ipw2200.c
++++ linux/drivers/net/wireless/intel/ipw2x00/ipw2200.c
+@@ -3397,10 +3397,8 @@ static int ipw_get_fw(struct ipw_priv *p
  
  	/* ask firmware_class module to get the boot firmware off disk */
  	rc = request_firmware(raw, name, &priv->pci_dev->dev);
@@ -1532,8 +1716,10 @@
  
  	if ((*raw)->size < sizeof(*fw)) {
  		IPW_ERROR("%s is too small (%zd)\n", name, (*raw)->size);
---- a/drivers/net/wireless/intel/iwlegacy/3945-mac.c
-+++ b/drivers/net/wireless/intel/iwlegacy/3945-mac.c
+Index: linux/drivers/net/wireless/intel/iwlegacy/3945-mac.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intel/iwlegacy/3945-mac.c
++++ linux/drivers/net/wireless/intel/iwlegacy/3945-mac.c
 @@ -1839,7 +1839,6 @@ il3945_read_ucode(struct il_priv *il)
  		sprintf(buf, "%s%u%s", name_pre, idx, ".ucode");
  		ret = request_firmware(&ucode_raw, buf, &il->pci_dev->dev);
@@ -1542,8 +1728,10 @@
  			if (ret == -ENOENT)
  				continue;
  			else
---- a/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
-+++ b/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
+Index: linux/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
++++ linux/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
 @@ -233,8 +233,6 @@ static int iwl_request_firmware(struct i
  	}
  
@@ -1553,8 +1741,10 @@
  		if (cfg->ucode_api_min == cfg->ucode_api_max) {
  			IWL_ERR(drv, "%s%d is required\n", cfg->fw_name_pre,
  				cfg->ucode_api_max);
---- a/drivers/net/wireless/intersil/orinoco/fw.c
-+++ b/drivers/net/wireless/intersil/orinoco/fw.c
+Index: linux/drivers/net/wireless/intersil/orinoco/fw.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intersil/orinoco/fw.c
++++ linux/drivers/net/wireless/intersil/orinoco/fw.c
 @@ -132,7 +132,6 @@ orinoco_dl_firmware(struct orinoco_priva
  		err = request_firmware(&fw_entry, firmware, priv->dev);
  
@@ -1587,9 +1777,11 @@
  	} else
  		fw_entry = orinoco_cached_fw_get(priv, false);
  
---- a/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
-+++ b/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
-@@ -1674,7 +1674,6 @@ static int ezusb_probe(struct usb_interf
+Index: linux/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
++++ linux/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
+@@ -1675,7 +1675,6 @@ static int ezusb_probe(struct usb_interf
  		if (ezusb_firmware_download(upriv, &firmware) < 0)
  			goto error;
  	} else {
@@ -1597,8 +1789,10 @@
  		goto error;
  	}
  
---- a/drivers/net/wireless/intersil/p54/p54pci.c
-+++ b/drivers/net/wireless/intersil/p54/p54pci.c
+Index: linux/drivers/net/wireless/intersil/p54/p54pci.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intersil/p54/p54pci.c
++++ linux/drivers/net/wireless/intersil/p54/p54pci.c
 @@ -496,7 +496,6 @@ static void p54p_firmware_step2(const st
  	int err;
  
@@ -1607,8 +1801,10 @@
  		err = -ENOENT;
  		goto out;
  	}
---- a/drivers/net/wireless/intersil/p54/p54spi.c
-+++ b/drivers/net/wireless/intersil/p54/p54spi.c
+Index: linux/drivers/net/wireless/intersil/p54/p54spi.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intersil/p54/p54spi.c
++++ linux/drivers/net/wireless/intersil/p54/p54spi.c
 @@ -157,10 +157,8 @@ static int p54spi_request_firmware(struc
  	/* FIXME: should driver use it's own struct device? */
  	ret = request_firmware(&priv->firmware, "3826.arm", &priv->spi->dev);
@@ -1621,9 +1817,11 @@
  
  	ret = p54_parse_firmware(dev, priv->firmware);
  	if (ret) {
---- a/drivers/net/wireless/intersil/p54/p54usb.c
-+++ b/drivers/net/wireless/intersil/p54/p54usb.c
-@@ -928,7 +928,6 @@ static void p54u_load_firmware_cb(const
+Index: linux/drivers/net/wireless/intersil/p54/p54usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intersil/p54/p54usb.c
++++ linux/drivers/net/wireless/intersil/p54/p54usb.c
+@@ -929,7 +929,6 @@ static void p54u_load_firmware_cb(const
  		err = p54u_start_ops(priv);
  	} else {
  		err = -ENOENT;
@@ -1631,8 +1829,10 @@
  	}
  
  	complete(&priv->fw_wait_load);
---- a/drivers/net/wireless/intersil/prism54/islpci_dev.c
-+++ b/drivers/net/wireless/intersil/prism54/islpci_dev.c
+Index: linux/drivers/net/wireless/intersil/prism54/islpci_dev.c
+===================================================================
+--- linux.orig/drivers/net/wireless/intersil/prism54/islpci_dev.c
++++ linux/drivers/net/wireless/intersil/prism54/islpci_dev.c
 @@ -80,12 +80,9 @@ isl_upload_firmware(islpci_private *priv
  		const u32 *fw_ptr;
  
@@ -1648,8 +1848,10 @@
  		/* prepare the Direct Memory Base register */
  		reg = ISL38XX_DEV_FIRMWARE_ADDRES;
  
---- a/drivers/net/wireless/marvell/libertas_tf/if_usb.c
-+++ b/drivers/net/wireless/marvell/libertas_tf/if_usb.c
+Index: linux/drivers/net/wireless/marvell/libertas_tf/if_usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/marvell/libertas_tf/if_usb.c
++++ linux/drivers/net/wireless/marvell/libertas_tf/if_usb.c
 @@ -817,8 +817,6 @@ static int if_usb_prog_firmware(struct l
  	kernel_param_lock(THIS_MODULE);
  	ret = request_firmware(&cardp->fw, lbtf_fw_name, &cardp->udev->dev);
@@ -1659,8 +1861,10 @@
  		kernel_param_unlock(THIS_MODULE);
  		goto done;
  	}
---- a/drivers/net/wireless/marvell/mwifiex/main.c
-+++ b/drivers/net/wireless/marvell/mwifiex/main.c
+Index: linux/drivers/net/wireless/marvell/mwifiex/main.c
+===================================================================
+--- linux.orig/drivers/net/wireless/marvell/mwifiex/main.c
++++ linux/drivers/net/wireless/marvell/mwifiex/main.c
 @@ -525,11 +525,8 @@ static int _mwifiex_fw_dpc(const struct
  	struct wireless_dev *wdev;
  	struct completion *fw_done = adapter->fw_done;
@@ -1674,8 +1878,10 @@
  
  	memset(&fw, 0, sizeof(struct mwifiex_fw_image));
  	adapter->firmware = firmware;
---- a/drivers/net/wireless/marvell/mwl8k.c
-+++ b/drivers/net/wireless/marvell/mwl8k.c
+Index: linux/drivers/net/wireless/marvell/mwl8k.c
+===================================================================
+--- linux.orig/drivers/net/wireless/marvell/mwl8k.c
++++ linux/drivers/net/wireless/marvell/mwl8k.c
 @@ -5727,16 +5727,12 @@ static int mwl8k_firmware_load_success(s
  static void mwl8k_fw_state_machine(const struct firmware *fw, void *context)
  {
@@ -1719,8 +1925,10 @@
  
  	if (nowait)
  		return rc;
---- a/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
-+++ b/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
+Index: linux/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
+===================================================================
+--- linux.orig/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
++++ linux/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
 @@ -38,10 +38,8 @@ static int rt2x00lib_request_firmware(st
  	rt2x00_info(rt2x00dev, "Loading firmware file '%s'\n", fw_name);
  
@@ -1733,8 +1941,10 @@
  
  	if (!fw || !fw->size || !fw->data) {
  		rt2x00_err(rt2x00dev, "Failed to read Firmware\n");
---- a/drivers/net/wireless/realtek/rtlwifi/core.c
-+++ b/drivers/net/wireless/realtek/rtlwifi/core.c
+Index: linux/drivers/net/wireless/realtek/rtlwifi/core.c
+===================================================================
+--- linux.orig/drivers/net/wireless/realtek/rtlwifi/core.c
++++ linux/drivers/net/wireless/realtek/rtlwifi/core.c
 @@ -89,7 +89,6 @@ static void rtl_fw_do_work(const struct
  			if (!err)
  				goto found_alt;
@@ -1743,8 +1953,10 @@
  		rtlpriv->max_fw_size = 0;
  		return;
  	}
---- a/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
-+++ b/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
+Index: linux/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
+===================================================================
+--- linux.orig/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
++++ linux/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
 @@ -64,13 +64,11 @@ static void rtl92se_fw_cb(const struct f
  	struct ieee80211_hw *hw = context;
  	struct rtl_priv *rtlpriv = rtl_priv(hw);
@@ -1759,8 +1971,10 @@
  		rtlpriv->max_fw_size = 0;
  		return;
  	}
---- a/drivers/net/wireless/ti/wl1251/main.c
-+++ b/drivers/net/wireless/ti/wl1251/main.c
+Index: linux/drivers/net/wireless/ti/wl1251/main.c
+===================================================================
+--- linux.orig/drivers/net/wireless/ti/wl1251/main.c
++++ linux/drivers/net/wireless/ti/wl1251/main.c
 @@ -57,10 +57,8 @@ static int wl1251_fetch_firmware(struct
  
  	ret = request_firmware(&fw, WL1251_FW_NAME, dev);
@@ -1785,8 +1999,10 @@
  
  	if (fw->size % 4) {
  		wl1251_error("nvs size is not multiple of 32 bits: %zu",
---- a/drivers/net/wireless/ti/wlcore/main.c
-+++ b/drivers/net/wireless/ti/wlcore/main.c
+Index: linux/drivers/net/wireless/ti/wlcore/main.c
+===================================================================
+--- linux.orig/drivers/net/wireless/ti/wlcore/main.c
++++ linux/drivers/net/wireless/ti/wlcore/main.c
 @@ -755,10 +755,8 @@ static int wl12xx_fetch_firmware(struct
  
  	ret = request_firmware(&fw, fw_name, wl->dev);
@@ -1799,8 +2015,10 @@
  
  	if (fw->size % 4) {
  		wl1271_error("firmware size is not multiple of 32 bits: %zu",
---- a/drivers/net/wireless/zydas/zd1201.c
-+++ b/drivers/net/wireless/zydas/zd1201.c
+Index: linux/drivers/net/wireless/zydas/zd1201.c
+===================================================================
+--- linux.orig/drivers/net/wireless/zydas/zd1201.c
++++ linux/drivers/net/wireless/zydas/zd1201.c
 @@ -62,8 +62,6 @@ static int zd1201_fw_upload(struct usb_d
  
  	err = request_firmware(&fw_entry, fwfile, &dev->dev);
@@ -1810,8 +2028,10 @@
  		dev_err(&dev->dev, "Goto http://linux-lc100020.sourceforge.net for more info.\n");
  		return err;
  	}
---- a/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
-+++ b/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
+Index: linux/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
+===================================================================
+--- linux.orig/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
++++ linux/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
 @@ -108,16 +108,9 @@ static void int_urb_complete(struct urb
  static int request_fw_file(
  	const struct firmware **fw, const char *name, struct device *device)
@@ -1830,8 +2050,10 @@
  }
  
  static inline u16 get_bcdDevice(const struct usb_device *udev)
---- a/drivers/scsi/advansys.c
-+++ b/drivers/scsi/advansys.c
+Index: linux/drivers/scsi/advansys.c
+===================================================================
+--- linux.orig/drivers/scsi/advansys.c
++++ linux/drivers/scsi/advansys.c
 @@ -4103,8 +4103,6 @@ static int AscInitAsc1000Driver(ASC_DVC_
  
  	err = request_firmware(&fw, fwname, asc_dvc->drv_ptr->dev);
@@ -1868,8 +2090,10 @@
  		asc_dvc->err_code = ASC_IERR_MCODE_CHKSUM;
  		return err;
  	}
---- a/drivers/scsi/aic94xx/aic94xx_init.c
-+++ b/drivers/scsi/aic94xx/aic94xx_init.c
+Index: linux/drivers/scsi/aic94xx/aic94xx_init.c
+===================================================================
+--- linux.orig/drivers/scsi/aic94xx/aic94xx_init.c
++++ linux/drivers/scsi/aic94xx/aic94xx_init.c
 @@ -365,8 +365,6 @@ static ssize_t asd_store_update_bios(str
  				   filename_ptr,
  				   &asd_ha->pcidev->dev);
@@ -1879,8 +2103,10 @@
  		err = FAIL_OPEN_BIOS_FILE;
  		goto out1;
  	}
---- a/drivers/scsi/aic94xx/aic94xx_seq.c
-+++ b/drivers/scsi/aic94xx/aic94xx_seq.c
+Index: linux/drivers/scsi/aic94xx/aic94xx_seq.c
+===================================================================
+--- linux.orig/drivers/scsi/aic94xx/aic94xx_seq.c
++++ linux/drivers/scsi/aic94xx/aic94xx_seq.c
 @@ -1299,11 +1299,8 @@ int asd_init_seqs(struct asd_ha_struct *
  
  	err = asd_request_firmware(asd_ha);
@@ -1894,8 +2120,10 @@
  
  	err = asd_seq_download_seqs(asd_ha);
  	if (err) {
---- a/drivers/scsi/bfa/bfad.c
-+++ b/drivers/scsi/bfa/bfad.c
+Index: linux/drivers/scsi/bfa/bfad.c
+===================================================================
+--- linux.orig/drivers/scsi/bfa/bfad.c
++++ linux/drivers/scsi/bfa/bfad.c
 @@ -1749,7 +1749,6 @@ bfad_read_firmware(struct pci_dev *pdev,
  	const struct firmware *fw;
  
@@ -1904,8 +2132,10 @@
  		*bfi_image = NULL;
  		goto out;
  	}
---- a/drivers/scsi/ipr.c
-+++ b/drivers/scsi/ipr.c
+Index: linux/drivers/scsi/ipr.c
+===================================================================
+--- linux.orig/drivers/scsi/ipr.c
++++ linux/drivers/scsi/ipr.c
 @@ -4091,10 +4091,8 @@ static ssize_t ipr_store_update_fw(struc
  	if (endline)
  		*endline = '\0';
@@ -1918,8 +2148,10 @@
  
  	image_hdr = (struct ipr_ucode_image_header *)fw_entry->data;
  
---- a/drivers/scsi/pm8001/pm8001_ctl.c
-+++ b/drivers/scsi/pm8001/pm8001_ctl.c
+Index: linux/drivers/scsi/pm8001/pm8001_ctl.c
+===================================================================
+--- linux.orig/drivers/scsi/pm8001/pm8001_ctl.c
++++ linux/drivers/scsi/pm8001/pm8001_ctl.c
 @@ -756,10 +756,6 @@ static ssize_t pm8001_store_update_fw(st
  			       pm8001_ha->dev);
  
@@ -1931,9 +2163,11 @@
  		pm8001_ha->fw_status = FAIL_OPEN_BIOS_FILE;
  		goto out;
  	}
---- a/drivers/scsi/qla1280.c
-+++ b/drivers/scsi/qla1280.c
-@@ -1533,8 +1533,6 @@ qla1280_request_firmware(struct scsi_qla
+Index: linux/drivers/scsi/qla1280.c
+===================================================================
+--- linux.orig/drivers/scsi/qla1280.c
++++ linux/drivers/scsi/qla1280.c
+@@ -1515,8 +1515,6 @@ qla1280_request_firmware(struct scsi_qla
  	err = request_firmware(&fw, fwname, &ha->pdev->dev);
  
  	if (err) {
@@ -1942,9 +2176,11 @@
  		fw = ERR_PTR(err);
  		goto unlock;
  	}
---- a/drivers/scsi/qla2xxx/qla_init.c
-+++ b/drivers/scsi/qla2xxx/qla_init.c
-@@ -7780,10 +7780,6 @@ qla2x00_load_risc(scsi_qla_host_t *vha,
+Index: linux/drivers/scsi/qla2xxx/qla_init.c
+===================================================================
+--- linux.orig/drivers/scsi/qla2xxx/qla_init.c
++++ linux/drivers/scsi/qla2xxx/qla_init.c
+@@ -7783,10 +7783,6 @@ qla2x00_load_risc(scsi_qla_host_t *vha,
  	/* Load firmware blob. */
  	blob = qla2x00_request_firmware(vha);
  	if (!blob) {
@@ -1955,7 +2191,7 @@
  		return QLA_FUNCTION_FAILED;
  	}
  
-@@ -7886,9 +7882,6 @@ qla24xx_load_risc_blob(scsi_qla_host_t *
+@@ -7889,9 +7885,6 @@ qla24xx_load_risc_blob(scsi_qla_host_t *
  
  	blob = qla2x00_request_firmware(vha);
  	if (!blob) {
@@ -1965,9 +2201,11 @@
  		return QLA_FUNCTION_FAILED;
  	}
  
---- a/drivers/scsi/qla2xxx/qla_nx.c
-+++ b/drivers/scsi/qla2xxx/qla_nx.c
-@@ -2475,11 +2475,8 @@ try_blob_fw:
+Index: linux/drivers/scsi/qla2xxx/qla_nx.c
+===================================================================
+--- linux.orig/drivers/scsi/qla2xxx/qla_nx.c
++++ linux/drivers/scsi/qla2xxx/qla_nx.c
+@@ -2476,11 +2476,8 @@ try_blob_fw:
  
  	/* Load firmware blob. */
  	blob = ha->hablob = qla2x00_request_firmware(vha);
@@ -1980,9 +2218,11 @@
  
  	/* Validating firmware blob */
  	if (qla82xx_validate_firmware_blob(vha,
---- a/drivers/scsi/qla2xxx/qla_os.c
-+++ b/drivers/scsi/qla2xxx/qla_os.c
-@@ -6803,8 +6803,6 @@ qla2x00_request_firmware(scsi_qla_host_t
+Index: linux/drivers/scsi/qla2xxx/qla_os.c
+===================================================================
+--- linux.orig/drivers/scsi/qla2xxx/qla_os.c
++++ linux/drivers/scsi/qla2xxx/qla_os.c
+@@ -6816,8 +6816,6 @@ qla2x00_request_firmware(scsi_qla_host_t
  		goto out;
  
  	if (request_firmware(&blob->fw, blob->name, &ha->pdev->dev)) {
@@ -1991,9 +2231,11 @@
  		blob->fw = NULL;
  		blob = NULL;
  	}
---- a/drivers/scsi/qlogicpti.c
-+++ b/drivers/scsi/qlogicpti.c
-@@ -476,11 +476,8 @@ static int qlogicpti_load_firmware(struc
+Index: linux/drivers/scsi/qlogicpti.c
+===================================================================
+--- linux.orig/drivers/scsi/qlogicpti.c
++++ linux/drivers/scsi/qlogicpti.c
+@@ -486,11 +486,8 @@ static int qlogicpti_load_firmware(struc
  	int i, timeout;
  
  	err = request_firmware(&fw, fwname, &qpti->op->dev);
@@ -2006,8 +2248,10 @@
  	if (fw->size % 2) {
  		printk(KERN_ERR "Bogus length %zu in image \"%s\"\n",
  		       fw->size, fwname);
---- a/drivers/staging/rtl8192u/r819xU_firmware.c
-+++ b/drivers/staging/rtl8192u/r819xU_firmware.c
+Index: linux/drivers/staging/rtl8192u/r819xU_firmware.c
+===================================================================
+--- linux.orig/drivers/staging/rtl8192u/r819xU_firmware.c
++++ linux/drivers/staging/rtl8192u/r819xU_firmware.c
 @@ -245,10 +245,8 @@ bool init_firmware(struct net_device *de
  		 */
  		if (rst_opt == OPT_SYSTEM_RESET) {
@@ -2020,9 +2264,11 @@
  
  			if (fw_entry->size > sizeof(pfirmware->firmware_buf)) {
  				RT_TRACE(COMP_ERR, "img file size exceed the container buffer fail!\n");
---- a/drivers/staging/rtl8712/hal_init.c
-+++ b/drivers/staging/rtl8712/hal_init.c
-@@ -59,8 +59,6 @@ int rtl871x_load_fw(struct _adapter *pad
+Index: linux/drivers/staging/rtl8712/hal_init.c
+===================================================================
+--- linux.orig/drivers/staging/rtl8712/hal_init.c
++++ linux/drivers/staging/rtl8712/hal_init.c
+@@ -60,8 +60,6 @@ int rtl871x_load_fw(struct _adapter *pad
  	dev_info(dev, "r8712u: Loading firmware from \"%s\"\n", firmware_file);
  	rc = request_firmware_nowait(THIS_MODULE, 1, firmware_file, dev,
  				     GFP_KERNEL, padapter, rtl871x_load_fw_cb);
@@ -2031,8 +2277,10 @@
  	return rc;
  }
  MODULE_FIRMWARE("rtlwifi/rtl8712u.bin");
---- a/drivers/staging/vt6656/firmware.c
-+++ b/drivers/staging/vt6656/firmware.c
+Index: linux/drivers/staging/vt6656/firmware.c
+===================================================================
+--- linux.orig/drivers/staging/vt6656/firmware.c
++++ linux/drivers/staging/vt6656/firmware.c
 @@ -38,11 +38,8 @@ int vnt_download_firmware(struct vnt_pri
  	dev_dbg(dev, "---->Download firmware\n");
  
@@ -2046,8 +2294,10 @@
  
  	buffer = kmalloc(FIRMWARE_CHUNK_SIZE, GFP_KERNEL);
  	if (!buffer) {
---- a/drivers/tty/cyclades.c
-+++ b/drivers/tty/cyclades.c
+Index: linux/drivers/tty/cyclades.c
+===================================================================
+--- linux.orig/drivers/tty/cyclades.c
++++ linux/drivers/tty/cyclades.c
 @@ -3484,10 +3484,8 @@ static int cyz_load_fw(struct pci_dev *p
  	int retval;
  
@@ -2060,8 +2310,10 @@
  
  	/* Check whether the firmware is already loaded and running. If
  	   positive, skip this board */
---- a/drivers/tty/moxa.c
-+++ b/drivers/tty/moxa.c
+Index: linux/drivers/tty/moxa.c
+===================================================================
+--- linux.orig/drivers/tty/moxa.c
++++ linux/drivers/tty/moxa.c
 @@ -854,13 +854,8 @@ static int moxa_init_board(struct moxa_b
  	}
  
@@ -2077,9 +2329,11 @@
  
  	ret = moxa_load_fw(brd, fw);
  
---- a/drivers/tty/serial/icom.c
-+++ b/drivers/tty/serial/icom.c
-@@ -360,7 +360,6 @@ static void load_code(struct icom_port *
+Index: linux/drivers/tty/serial/icom.c
+===================================================================
+--- linux.orig/drivers/tty/serial/icom.c
++++ linux/drivers/tty/serial/icom.c
+@@ -358,7 +358,6 @@ static void load_code(struct icom_port *
  
  	/* Load Call Setup into Adapter */
  	if (request_firmware(&fw, "icom_call_setup.bin", &dev->dev) < 0) {
@@ -2087,7 +2341,7 @@
  		status = -1;
  		goto load_code_exit;
  	}
-@@ -380,7 +379,6 @@ static void load_code(struct icom_port *
+@@ -378,7 +377,6 @@ static void load_code(struct icom_port *
  
  	/* Load Resident DCE portion of Adapter */
  	if (request_firmware(&fw, "icom_res_dce.bin", &dev->dev) < 0) {
@@ -2095,7 +2349,7 @@
  		status = -1;
  		goto load_code_exit;
  	}
-@@ -425,7 +423,6 @@ static void load_code(struct icom_port *
+@@ -423,7 +421,6 @@ static void load_code(struct icom_port *
  	}
  
  	if (request_firmware(&fw, "icom_asc.bin", &dev->dev) < 0) {
@@ -2103,8 +2357,10 @@
  		status = -1;
  		goto load_code_exit;
  	}
---- a/drivers/tty/serial/ucc_uart.c
-+++ b/drivers/tty/serial/ucc_uart.c
+Index: linux/drivers/tty/serial/ucc_uart.c
+===================================================================
+--- linux.orig/drivers/tty/serial/ucc_uart.c
++++ linux/drivers/tty/serial/ucc_uart.c
 @@ -1165,10 +1165,8 @@ static void uart_firmware_cont(const str
  	struct device *dev = context;
  	int ret;
@@ -2117,9 +2373,11 @@
  
  	firmware = (struct qe_firmware *) fw->data;
  
---- a/drivers/usb/atm/cxacru.c
-+++ b/drivers/usb/atm/cxacru.c
-@@ -1080,8 +1080,6 @@ static int cxacru_find_firmware(struct c
+Index: linux/drivers/usb/atm/cxacru.c
+===================================================================
+--- linux.orig/drivers/usb/atm/cxacru.c
++++ linux/drivers/usb/atm/cxacru.c
+@@ -1088,8 +1088,6 @@ static int cxacru_find_firmware(struct c
  		return -ENOENT;
  	}
  
@@ -2128,8 +2386,10 @@
  	return 0;
  }
  
---- a/drivers/usb/atm/ueagle-atm.c
-+++ b/drivers/usb/atm/ueagle-atm.c
+Index: linux/drivers/usb/atm/ueagle-atm.c
+===================================================================
+--- linux.orig/drivers/usb/atm/ueagle-atm.c
++++ linux/drivers/usb/atm/ueagle-atm.c
 @@ -606,10 +606,8 @@ static void uea_upload_pre_firmware(cons
  	int ret, size;
  
@@ -2204,8 +2464,10 @@
  
  	pfw = fw_entry->data;
  	size = fw_entry->size;
---- a/drivers/usb/misc/emi26.c
-+++ b/drivers/usb/misc/emi26.c
+Index: linux/drivers/usb/misc/emi26.c
+===================================================================
+--- linux.orig/drivers/usb/misc/emi26.c
++++ linux/drivers/usb/misc/emi26.c
 @@ -85,21 +85,17 @@ static int emi26_load_firmware (struct u
  
  	err = request_ihex_firmware(&loader_fw, "emi26/loader.fw", &dev->dev);
@@ -2231,8 +2493,10 @@
  
  	/* Assert reset (stop the CPU in the EMI) */
  	err = emi26_set_reset(dev,1);
---- a/drivers/usb/misc/ezusb.c
-+++ b/drivers/usb/misc/ezusb.c
+Index: linux/drivers/usb/misc/ezusb.c
+===================================================================
+--- linux.orig/drivers/usb/misc/ezusb.c
++++ linux/drivers/usb/misc/ezusb.c
 @@ -76,12 +76,8 @@ static int ezusb_ihex_firmware_download(
  	const struct ihex_binrec *record;
  
@@ -2247,8 +2511,10 @@
  
  	ret = ezusb_set_reset(dev, fx.cpucs_reg, 0);
  	if (ret < 0)
---- a/drivers/usb/misc/isight_firmware.c
-+++ b/drivers/usb/misc/isight_firmware.c
+Index: linux/drivers/usb/misc/isight_firmware.c
+===================================================================
+--- linux.orig/drivers/usb/misc/isight_firmware.c
++++ linux/drivers/usb/misc/isight_firmware.c
 @@ -45,7 +45,6 @@ static int isight_firmware_load(struct u
  		return -ENOMEM;
  
@@ -2257,8 +2523,10 @@
  		ret = -ENODEV;
  		goto out;
  	}
---- a/drivers/usb/serial/io_edgeport.c
-+++ b/drivers/usb/serial/io_edgeport.c
+Index: linux/drivers/usb/serial/io_edgeport.c
+===================================================================
+--- linux.orig/drivers/usb/serial/io_edgeport.c
++++ linux/drivers/usb/serial/io_edgeport.c
 @@ -375,11 +375,8 @@ static void update_edgeport_E2PROM(struc
  
  	response = request_ihex_firmware(&fw, fw_name,
@@ -2272,8 +2540,10 @@
  
  	rec = (const struct ihex_binrec *)fw->data;
  	BootMajorVersion = rec->data[0];
---- a/drivers/usb/serial/io_ti.c
-+++ b/drivers/usb/serial/io_ti.c
+Index: linux/drivers/usb/serial/io_ti.c
+===================================================================
+--- linux.orig/drivers/usb/serial/io_ti.c
++++ linux/drivers/usb/serial/io_ti.c
 @@ -1010,8 +1010,6 @@ static int download_fw(struct edgeport_s
  
  	status = request_firmware(&fw, fw_name, dev);
@@ -2283,9 +2553,11 @@
  		return status;
  	}
  
---- a/drivers/usb/serial/ti_usb_3410_5052.c
-+++ b/drivers/usb/serial/ti_usb_3410_5052.c
-@@ -1667,10 +1667,8 @@ static int ti_download_firmware(struct t
+Index: linux/drivers/usb/serial/ti_usb_3410_5052.c
+===================================================================
+--- linux.orig/drivers/usb/serial/ti_usb_3410_5052.c
++++ linux/drivers/usb/serial/ti_usb_3410_5052.c
+@@ -1663,10 +1663,8 @@ static int ti_download_firmware(struct t
  	}
  
  check_firmware:
@@ -2297,8 +2569,10 @@
  	if (fw_p->size > TI_FIRMWARE_BUF_SIZE) {
  		dev_err(&dev->dev, "%s - firmware too large %zu\n", __func__, fw_p->size);
  		release_firmware(fw_p);
---- a/drivers/video/fbdev/broadsheetfb.c
-+++ b/drivers/video/fbdev/broadsheetfb.c
+Index: linux/drivers/video/fbdev/broadsheetfb.c
+===================================================================
+--- linux.orig/drivers/video/fbdev/broadsheetfb.c
++++ linux/drivers/video/fbdev/broadsheetfb.c
 @@ -743,10 +743,8 @@ static ssize_t broadsheet_loadstore_wave
  		return -EINVAL;
  
@@ -2311,8 +2585,10 @@
  
  	/* try to enforce reasonable min max on waveform */
  	if ((fw_entry->size < 8*1024) || (fw_entry->size > 64*1024)) {
---- a/drivers/video/fbdev/metronomefb.c
-+++ b/drivers/video/fbdev/metronomefb.c
+Index: linux/drivers/video/fbdev/metronomefb.c
+===================================================================
+--- linux.orig/drivers/video/fbdev/metronomefb.c
++++ linux/drivers/video/fbdev/metronomefb.c
 @@ -679,10 +679,8 @@ static int metronomefb_probe(struct plat
  		a) request the waveform file from userspace
  		b) process waveform and decode into metromem */
@@ -2325,8 +2601,10 @@
  
  	retval = load_waveform((u8 *) fw_entry->data, fw_entry->size, 3, 31,
  				par);
---- a/sound/drivers/vx/vx_hwdep.c
-+++ b/sound/drivers/vx/vx_hwdep.c
+Index: linux/sound/drivers/vx/vx_hwdep.c
+===================================================================
+--- linux.orig/sound/drivers/vx/vx_hwdep.c
++++ linux/sound/drivers/vx/vx_hwdep.c
 @@ -58,10 +58,8 @@ int snd_vx_setup_firmware(struct vx_core
  		if (! fw_files[chip->type][i])
  			continue;
@@ -2339,8 +2617,10 @@
  		err = chip->ops->load_dsp(chip, i, fw);
  		if (err < 0) {
  			release_firmware(fw);
---- a/sound/isa/msnd/msnd_pinnacle.c
-+++ b/sound/isa/msnd/msnd_pinnacle.c
+Index: linux/sound/isa/msnd/msnd_pinnacle.c
+===================================================================
+--- linux.orig/sound/isa/msnd/msnd_pinnacle.c
++++ linux/sound/isa/msnd/msnd_pinnacle.c
 @@ -376,15 +376,11 @@ static int upload_dsp_code(struct snd_ca
  	outb(HPBLKSEL_0, chip->io + HP_BLKS);
  
@@ -2359,8 +2639,10 @@
  
  	memcpy_toio(chip->mappedbase, perm_fw->data, perm_fw->size);
  	if (snd_msnd_upload_host(chip, init_fw->data, init_fw->size) < 0) {
---- a/sound/isa/sscape.c
-+++ b/sound/isa/sscape.c
+Index: linux/sound/isa/sscape.c
+===================================================================
+--- linux.orig/sound/isa/sscape.c
++++ linux/sound/isa/sscape.c
 @@ -531,10 +531,8 @@ static int sscape_upload_bootblock(struc
  	int ret;
  
@@ -2386,9 +2668,11 @@
  	err = upload_dma_data(sscape, init_fw->data, init_fw->size);
  	if (err == 0)
  		snd_printk(KERN_INFO "sscape: MIDI firmware loaded %zu KBs\n",
---- a/sound/isa/wavefront/wavefront_synth.c
-+++ b/sound/isa/wavefront/wavefront_synth.c
-@@ -1954,10 +1954,8 @@ wavefront_download_firmware (snd_wavefro
+Index: linux/sound/isa/wavefront/wavefront_synth.c
+===================================================================
+--- linux.orig/sound/isa/wavefront/wavefront_synth.c
++++ linux/sound/isa/wavefront/wavefront_synth.c
+@@ -1959,10 +1959,8 @@ wavefront_download_firmware (snd_wavefro
  	const struct firmware *firmware;
  
  	err = request_firmware(&firmware, path, dev->card->dev);
@@ -2400,8 +2684,10 @@
  
  	len = 0;
  	buf = firmware->data;
---- a/sound/pci/asihpi/hpidspcd.c
-+++ b/sound/pci/asihpi/hpidspcd.c
+Index: linux/sound/pci/asihpi/hpidspcd.c
+===================================================================
+--- linux.orig/sound/pci/asihpi/hpidspcd.c
++++ linux/sound/pci/asihpi/hpidspcd.c
 @@ -35,8 +35,6 @@ short hpi_dsp_code_open(u32 adapter, voi
  	err = request_firmware(&firmware, fw_name, &dev->dev);
  
@@ -2411,8 +2697,10 @@
  		goto error1;
  	}
  	if (firmware->size < sizeof(header)) {
---- a/sound/pci/cs46xx/cs46xx_lib.c
-+++ b/sound/pci/cs46xx/cs46xx_lib.c
+Index: linux/sound/pci/cs46xx/cs46xx_lib.c
+===================================================================
+--- linux.orig/sound/pci/cs46xx/cs46xx_lib.c
++++ linux/sound/pci/cs46xx/cs46xx_lib.c
 @@ -3241,11 +3241,8 @@ int snd_cs46xx_start_dsp(struct snd_cs46
  #ifdef CONFIG_SND_CS46XX_NEW_DSP
  	for (i = 0; i < CS46XX_DSP_MODULES; i++) {
@@ -2426,8 +2714,10 @@
  		err = cs46xx_dsp_load_module(chip, chip->modules[i]);
  		if (err < 0) {
  			dev_err(chip->card->dev, "image download error [%s]\n",
---- a/sound/pci/echoaudio/echoaudio.c
-+++ b/sound/pci/echoaudio/echoaudio.c
+Index: linux/sound/pci/echoaudio/echoaudio.c
+===================================================================
+--- linux.orig/sound/pci/echoaudio/echoaudio.c
++++ linux/sound/pci/echoaudio/echoaudio.c
 @@ -48,11 +48,8 @@ static int get_firmware(const struct fir
  		"firmware requested: %s\n", card_fw[fw_index].data);
  	snprintf(name, sizeof(name), "ea/%s", card_fw[fw_index].data);
@@ -2441,8 +2731,10 @@
  		chip->fw_cache[fw_index] = *fw_entry;
  #endif
  	return err;
---- a/sound/pci/emu10k1/emu10k1_main.c
-+++ b/sound/pci/emu10k1/emu10k1_main.c
+Index: linux/sound/pci/emu10k1/emu10k1_main.c
+===================================================================
+--- linux.orig/sound/pci/emu10k1/emu10k1_main.c
++++ linux/sound/pci/emu10k1/emu10k1_main.c
 @@ -873,10 +873,8 @@ static int snd_emu10k1_emu1010_init(stru
  	dev_info(emu->card->dev, "emu1010: EMU_HANA_ID = 0x%x\n", reg);
  
@@ -2455,22 +2747,23 @@
  
  	/* ID, should read & 0x7f = 0x55 when FPGA programmed. */
  	snd_emu1010_fpga_read(emu, EMU_HANA_ID, &reg);
---- a/sound/pci/hda/hda_intel.c
-+++ b/sound/pci/hda/hda_intel.c
-@@ -1908,10 +1908,8 @@ static void azx_firmware_cb(const struct
- 	struct azx *chip = card->private_data;
- 	struct pci_dev *pci = chip->pci;
+Index: linux/sound/pci/hda/hda_intel.c
+===================================================================
+--- linux.orig/sound/pci/hda/hda_intel.c
++++ linux/sound/pci/hda/hda_intel.c
+@@ -1983,8 +1983,6 @@ static void azx_firmware_cb(const struct
  
--	if (!fw) {
--		dev_err(card->dev, "Cannot load firmware, aborting\n");
-+	if (!fw)
- 		goto error;
--	}
- 
- 	chip->fw = fw;
+ 	if (fw)
+ 		chip->fw = fw;
+-	else
+-		dev_err(card->dev, "Cannot load firmware, continue without patching\n");
  	if (!chip->disabled) {
---- a/sound/pci/korg1212/korg1212.c
-+++ b/sound/pci/korg1212/korg1212.c
+ 		/* continue probing */
+ 		azx_probe_continue(chip);
+Index: linux/sound/pci/korg1212/korg1212.c
+===================================================================
+--- linux.orig/sound/pci/korg1212/korg1212.c
++++ linux/sound/pci/korg1212/korg1212.c
 @@ -2332,7 +2332,6 @@ static int snd_korg1212_create(struct sn
  
  	err = request_firmware(&dsp_code, "korg/k1212.dsp", &pci->dev);
@@ -2479,8 +2772,10 @@
  		snd_korg1212_free(korg1212);
  		return err;
  	}
---- a/sound/pci/mixart/mixart_hwdep.c
-+++ b/sound/pci/mixart/mixart_hwdep.c
+Index: linux/sound/pci/mixart/mixart_hwdep.c
+===================================================================
+--- linux.orig/sound/pci/mixart/mixart_hwdep.c
++++ linux/sound/pci/mixart/mixart_hwdep.c
 @@ -558,11 +558,8 @@ int snd_mixart_setup_firmware(struct mix
  
  	for (i = 0; i < 3; i++) {
@@ -2494,8 +2789,10 @@
  		/* fake hwdep dsp record */
  		err = mixart_dsp_load(mgr, i, fw_entry);
  		release_firmware(fw_entry);
---- a/sound/pci/pcxhr/pcxhr_hwdep.c
-+++ b/sound/pci/pcxhr/pcxhr_hwdep.c
+Index: linux/sound/pci/pcxhr/pcxhr_hwdep.c
+===================================================================
+--- linux.orig/sound/pci/pcxhr/pcxhr_hwdep.c
++++ linux/sound/pci/pcxhr/pcxhr_hwdep.c
 @@ -372,12 +372,8 @@ int pcxhr_setup_firmware(struct pcxhr_mg
  		if (!fw_files[fw_set][i])
  			continue;
@@ -2510,8 +2807,10 @@
  		/* fake hwdep dsp record */
  		err = pcxhr_dsp_load(mgr, i, fw_entry);
  		release_firmware(fw_entry);
---- a/sound/pci/riptide/riptide.c
-+++ b/sound/pci/riptide/riptide.c
+Index: linux/sound/pci/riptide/riptide.c
+===================================================================
+--- linux.orig/sound/pci/riptide/riptide.c
++++ linux/sound/pci/riptide/riptide.c
 @@ -1216,11 +1216,8 @@ static int try_to_load_firmware(struct c
  	if (!chip->fw_entry) {
  		err = request_firmware(&chip->fw_entry, "riptide.hex",
@@ -2525,8 +2824,10 @@
  	}
  	err = loadfirmware(cif, chip->fw_entry->data, chip->fw_entry->size);
  	if (err) {
---- a/sound/pci/rme9652/hdsp.c
-+++ b/sound/pci/rme9652/hdsp.c
+Index: linux/sound/pci/rme9652/hdsp.c
+===================================================================
+--- linux.orig/sound/pci/rme9652/hdsp.c
++++ linux/sound/pci/rme9652/hdsp.c
 @@ -5117,11 +5117,8 @@ static int hdsp_request_fw_loader(struct
  		return -EINVAL;
  	}
@@ -2540,8 +2841,10 @@
  	if (fw->size < HDSP_FIRMWARE_SIZE) {
  		dev_err(hdsp->card->dev,
  			"too short firmware size %d (expected %d)\n",
---- a/sound/soc/codecs/wm2000.c
-+++ b/sound/soc/codecs/wm2000.c
+Index: linux/sound/soc/codecs/wm2000.c
+===================================================================
+--- linux.orig/sound/soc/codecs/wm2000.c
++++ linux/sound/soc/codecs/wm2000.c
 @@ -894,10 +894,8 @@ static int wm2000_i2c_probe(struct i2c_c
  	}
  
@@ -2554,8 +2857,10 @@
  
  	/* Pre-cook the concatenation of the register address onto the image */
  	wm2000->anc_download_size = fw->size + 2;
---- a/sound/usb/6fire/firmware.c
-+++ b/sound/usb/6fire/firmware.c
+Index: linux/sound/usb/6fire/firmware.c
+===================================================================
+--- linux.orig/sound/usb/6fire/firmware.c
++++ linux/sound/usb/6fire/firmware.c
 @@ -215,8 +215,6 @@ static int usb6fire_fw_ezusb_upload(
  	ret = request_firmware(&fw, fwname, &device->dev);
  	if (ret < 0) {
--- a/debian/patches/debian/ia64-hardcode-arch-script-output.patch	2020-09-28 15:37:19.440854369 +0000
+++ b/debian/patches/debian/ia64-hardcode-arch-script-output.patch	2020-09-28 15:52:48.448545548 +0000
@@ -24,11 +24,11 @@
  arch/ia64/Makefile | 17 ++---------------
  1 file changed, 2 insertions(+), 15 deletions(-)
 
-diff --git a/arch/ia64/Makefile b/arch/ia64/Makefile
-index 32240000dc0c..27c1b0bc39c1 100644
---- a/arch/ia64/Makefile
-+++ b/arch/ia64/Makefile
-@@ -28,16 +28,7 @@ cflags-y	:= -pipe $(EXTRA) -ffixed-r13 -mfixed-range=f12-f15,f32-f127 \
+Index: linux/arch/ia64/Makefile
+===================================================================
+--- linux.orig/arch/ia64/Makefile
++++ linux/arch/ia64/Makefile
+@@ -28,16 +28,7 @@ cflags-y	:= -pipe $(EXTRA) -ffixed-r13 -
  		   -falign-functions=32 -frename-registers -fno-optimize-sibling-calls
  KBUILD_CFLAGS_KERNEL := -mconstant-gp
  
@@ -45,8 +45,8 @@
 +KBUILD_CPPFLAGS += -DHAVE_WORKING_TEXT_ALIGN -DHAVE_MODEL_SMALL_ATTRIBUTE -DHAVE_SERIALIZE_DIRECTIVE
  
  quiet_cmd_gzip = GZIP    $@
- cmd_gzip = cat $(real-prereqs) | gzip -n -f -9 > $@
-@@ -57,7 +48,7 @@ drivers-$(CONFIG_OPROFILE)	+= arch/ia64/oprofile/
+ cmd_gzip = cat $(real-prereqs) | $(KGZIP) -n -f -9 > $@
+@@ -57,7 +48,7 @@ drivers-$(CONFIG_OPROFILE)	+= arch/ia64/
  
  PHONY += compressed check
  
@@ -73,6 +73,3 @@
  endef
  
  archprepare: make_nr_irqs_h
--- 
-2.23.0
-
--- a/debian/patches/bugfix/all/reactivate_relaxation.patch	1970-01-01 00:00:00.000000000 +0000
+++ b/debian/patches/bugfix/all/reactivate_relaxation.patch	2020-09-24 22:28:21.000000000 +0000
@@ -0,0 +1,11 @@
+--- a/arch/x86/boot/compressed/Makefile
++++ b/arch/x86/boot/compressed/Makefile
+@@ -38,8 +38,6 @@ KBUILD_CFLAGS += $(call cc-option,-fno-stack-protector)
+ KBUILD_CFLAGS += $(call cc-disable-warning, address-of-packed-member)
+ KBUILD_CFLAGS += $(call cc-disable-warning, gnu)
+ KBUILD_CFLAGS += -Wno-pointer-sign
+-# Disable relocation relaxation in case the link is not PIE.
+-KBUILD_CFLAGS += $(call as-option,-Wa$(comma)-mrelax-relocations=no)
+ 
+ KBUILD_AFLAGS  := $(KBUILD_CFLAGS) -D__ASSEMBLY__
+ GCOV_PROFILE := n
--- a/debian/patches/bugfix/all/udev_context.patch	1970-01-01 00:00:00.000000000 +0000
+++ b/debian/patches/bugfix/all/udev_context.patch	2020-09-24 22:28:21.000000000 +0000
@@ -0,0 +1,11 @@
+--- a/tools/usb/usbip/libsrc/usbip_host_common.c
++++ b/tools/usb/usbip/libsrc/usbip_host_common.c
+@@ -23,7 +23,7 @@
+ #include "list.h"
+ #include "sysfs_utils.h"
+ 
+-struct udev *udev_context;
++extern struct udev *udev_context;
+ 
+ static int32_t read_attr_usbip_status(struct usbip_usb_device *udev)
+ {
--- a/debian/patches/series	2020-09-28 17:38:06.674392807 +0000
+++ b/debian/patches/series	2020-09-28 17:51:57.246103562 +0000
@@ -71,7 +71,6 @@
 bugfix/powerpc/powerpc-boot-fix-missing-crc32poly.h-when-building-with-kernel_xz.patch
 bugfix/arm64/arm64-acpi-Add-fixup-for-HPE-m400-quirks.patch
 bugfix/x86/x86-32-disable-3dnow-in-generic-config.patch
-bugfix/ppc64el/libbpf-fix-readelf-output-parsing-on-powerpc-with-re.patch
 
 # Arch features
 features/mips/MIPS-Loongson-3-Add-Loongson-LS3A-RS780E-1-way-machi.patch
@@ -98,11 +97,7 @@
 features/all/lockdown/lockdown-refer-to-debian-wiki-until-manual-page-exists.patch
 
 # Improve integrity platform keyring for kernel modules verification
-features/all/db-mok-keyring/0006-Make-get_cert_list-not-complain-about-cert-lists-tha.patch
-features/all/db-mok-keyring/0001-MODSIGN-do-not-load-mok-when-secure-boot-disabled.patch
-features/all/db-mok-keyring/0002-MODSIGN-load-blacklist-from-MOKx.patch
 features/all/db-mok-keyring/0003-MODSIGN-checking-the-blacklisted-hash-before-loading-a-kernel-module.patch
-features/all/db-mok-keyring/0004-MODSIGN-check-the-attributes-of-db-and-mok.patch
 features/all/db-mok-keyring/modsign-make-shash-allocation-failure-fatal.patch
 features/all/db-mok-keyring/KEYS-Make-use-of-platform-keyring-for-module-signature.patch
 
@@ -123,9 +118,7 @@
 bugfix/all/cpupower-bump-soname-version.patch
 bugfix/all/libcpupower-hide-private-function.patch
 bugfix/all/cpupower-fix-checks-for-cpu-existence.patch
-bugfix/all/tools-lib-api-fs-fs.c-fix-misuse-of-strncpy.patch
 bugfix/all/usbip-fix-misuse-of-strncpy.patch
-bugfix/all/usbip-network-fix-unaligned-member-access.patch
 bugfix/all/tools-perf-pmu-events-fix-reproducibility.patch
 bugfix/all/0001-libtraceevent-Fix-header-installation.patch
 bugfix/all/0004-libtraceevent-allow-custom-libdir-path.patch
@@ -139,3 +132,5 @@
 
 # ABI maintenance
 debian/Revert-cpupower-Revert-library-ABI-changes-from-comm.patch
+bugfix/all/udev_context.patch
+bugfix/all/reactivate_relaxation.patch
