#!/usr/bin/env python3

import sys
import urllib.request
import urllib.error

def fetch_container_info(version):
    # Ensure the version follows the format "1234.5"
    if '.' not in version:
        version = f"{version}.0"

    url = f"https://raw.githubusercontent.com/gardenlinux/repo/refs/tags/{version}/.container"

    try:
        with urllib.request.urlopen(url) as response:
            content = response.read().decode('utf-8')
            print(content)
    except urllib.error.HTTPError as e:
        print(f"Failed to download file. HTTP Status Code: {e.code}")
        print("Please check if the version number is correct.")
    except urllib.error.URLError as e:
        print(f"An error occurred while trying to download the file: {e.reason}")

def main():
    if len(sys.argv) != 2:
        print("Usage: python find-build-container-for <version>")
        return

    version = sys.argv[1]
    fetch_container_info(version)

if __name__ == "__main__":
    main()
