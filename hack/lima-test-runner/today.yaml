vmType: qemu
os: Linux
images:
- location: "https://images.gardenlinux.io/gardenlinux-amd64-today.qcow2"
  arch: "x86_64"
- location: "https://images.gardenlinux.io/gardenlinux-arm64-today.qcow2"
  arch: "aarch64"
containerd:
  system: false
  user: false

# Configure user for predictable username and uid (>= 1000)
user:
  name: user
  comment: user
  uid: 1001
  home: /home/user
  shell: /bin/bash

provision:
- mode: system
  script: |
    #!/bin/bash
    set -eux -o pipefail
    export DEBIAN_FRONTEND=noninteractive
    apt-get update
    apt-get -y install git python3-pip

- mode: user
  script: |
    #!/bin/bash
    set -eux -o pipefail
    pip install --break-system-packages boolean.py pytest

mounts:
- location: "~"

- location: "{{.GlobalTempDir}}/lima"
  mountPoint: /tmp/lima
  writable: true

mountTypesUnsupported: [9p]
